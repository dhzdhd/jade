const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./-QzueJcz.js","./Cr6vKWRo.js","./D1LFdX-h.js","./D94ONYKc.js","./Cz9VreEy.js","./Cp6DLeIx.js"])))=>i.map(i=>d[i]);
import"./DsnmJJEf.js";import{M as Yo,i as je,N as Kr,l as Br,bk as Zr,p as J,z as de,y as ne,f as G,c as Q,r as q,t as ie,k as l,a as z,A as m,b as $,bh as ke,s as j,ak as $e,n as A,w as ce,aR as Xo,aQ as Yr,aP as Rn,u as Xr,bj as zt,bl as Fo,h as et,bi as Ne,B as En,bm as pe,bn as Pe,bo as Fr,U as no}from"./D1LFdX-h.js";import{s as we,k as ye,o as Wr,l as qt,d as Wo,p as Vn,j as oo}from"./D94ONYKc.js";import{p as L,r as Se,b as Te,s as Ln,i as ue,_ as qr,c as He}from"./Cr6vKWRo.js";import{e as tt,B as Gr,s as oe,a as ze,i as Gt,b as Ee,c as xt,I as qo,C as Kn,d as Go,S as Bn,f as Ue,g as it,M as Ur,h as ro,j as jr,k as Qr,l as gn,m as Jr}from"./MaXkpfpr.js";import{p as $r,i as ei}from"./DYbssOfm.js";import{s as Me,d as Zn,p as Re,T as ti,t as ni,n as Uo,m as oi,b as ri,c as ii,e as rn,f as Pt,g as si}from"./-1xU6hw1.js";import"./Bz1CHLWW.js";function xe(t,e,n){Yo(()=>{var o=je(()=>e(t,n?.())||{});if(n&&o?.update){var r=!1,s={};Kr(()=>{var i=n();Br(i),r&&Zr(s,i)&&(s=i,o.update(i))}),r=!0}if(o?.destroy)return()=>o.destroy()})}class Yn{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(e){this.#n=e}observe(e,n){var o=this.#e.get(e)||new Set;return o.add(n),this.#e.set(e,o),this.#o().observe(e,this.#n),()=>{var r=this.#e.get(e);r.delete(n),r.size===0&&(this.#e.delete(e),this.#t.unobserve(e))}}#o(){return this.#t??(this.#t=new ResizeObserver(e=>{for(var n of e){Yn.entries.set(n.target,n);for(var o of this.#e.get(n.target)||[])o(n)}}))}}var ai=new Yn({box:"border-box"});function io(t,e,n){var o=ai.observe(t,()=>n(t[e]));Yo(()=>(je(()=>n(t[e])),o))}var li=G('<a class="w-full px-1 py-2"><span class="text-left text-wrap"> </span></a>'),ci=G('<li class="m-0 p-0"><!></li>');function di(t,e){J(e,!0);var n=de(),o=ne(n);tt(o,17,()=>e.headings,Gt,(r,s)=>{const i=m(()=>$r.url.hash===l(s).url);var a=ci(),f=Q(a);{let u=m(()=>l(i)?"secondary":"ghost");Gr(f,{get variant(){return l(u)},class:"flex h-fit w-full flex-row justify-between overflow-clip p-0 text-left",children:(c,h)=>{var d=li(),y=Q(d),v=Q(y,!0);q(y),q(d),ie(()=>{oe(d,"href",l(s).url),ze(d,`padding-left: ${l(s).level-.5*1}rem`),we(v,l(s).text)}),z(c,d)},$$slots:{default:!0}})}q(a),z(r,a)}),z(t,n),$()}var ui=G("<nav><!></nav>");function fi(t,e){J(e,!0);let n=L(e,"ref",15),o=Se(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=ui();Ee(r,()=>({class:e.class,"aria-label":"breadcrumb",...o}));var s=Q(r);ye(s,()=>e.children??ke),q(r),Te(r,i=>n(i),()=>n()),z(t,r),$()}var hi=G("<li><!></li>");function so(t,e){J(e,!0);let n=L(e,"ref",15,null),o=Se(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=hi();Ee(r,i=>({class:i,...o}),[()=>xt("inline-flex items-center gap-1.5",e.class)]);var s=Q(r);ye(s,()=>e.children??ke),q(r),Te(r,i=>n(i),()=>n()),z(t,r),$()}function jo(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.552.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Se(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"m9 18 6-6-6-6"}]];qo(t,Ln({name:"chevron-right"},()=>n,{get iconNode(){return o},children:(r,s)=>{var i=de(),a=ne(i);ye(a,()=>e.children??ke),z(r,i)},$$slots:{default:!0}})),$()}var gi=G("<li><!></li>");function mi(t,e){J(e,!0);let n=L(e,"ref",15,null),o=Se(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=gi();Ee(r,f=>({role:"presentation","aria-hidden":"true",class:f,...o}),[()=>xt("[&>svg]:size-3.5",e.class)]);var s=Q(r);{var i=f=>{var u=de(),c=ne(u);ye(c,()=>e.children??ke),z(f,u)},a=f=>{jo(f,{})};ue(s,f=>{e.children?f(i):f(a,!1)})}q(r),Te(r,f=>n(f),()=>n()),z(t,r),$()}var yi=G("<a><!></a>");function vi(t,e){J(e,!0);let n=L(e,"ref",15,null),o=L(e,"href",3,void 0),r=Se(e,["$$slots","$$events","$$legacy","ref","class","href","child","children"]);const s=m(()=>({class:xt("hover:text-foreground transition-colors",e.class),href:o(),...r}));var i=de(),a=ne(i);{var f=c=>{var h=de(),d=ne(h);ye(d,()=>e.child,()=>({props:l(s)})),z(c,h)},u=c=>{var h=yi();Ee(h,()=>({...l(s)}));var d=Q(h);ye(d,()=>e.children??ke),q(h),Te(h,y=>n(y),()=>n()),z(c,h)};ue(a,c=>{e.child?c(f):c(u,!1)})}z(t,i),$()}var pi=G("<ol><!></ol>");function xi(t,e){J(e,!0);let n=L(e,"ref",15,null),o=Se(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=pi();Ee(r,i=>({class:i,...o}),[()=>xt("text-muted-foreground flex flex-wrap items-center gap-1.5 break-words text-sm sm:gap-2.5",e.class)]);var s=Q(r);ye(s,()=>e.children??ke),q(r),Te(r,i=>n(i),()=>n()),z(t,r),$()}var wi=G("<span><!></span>");function bi(t,e){J(e,!0);let n=L(e,"ref",15,null),o=Se(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=wi();Ee(r,i=>({role:"link","aria-disabled":"true","aria-current":"page",class:i,...o}),[()=>xt("text-foreground font-normal",e.class)]);var s=Q(r);ye(s,()=>e.children??ke),q(r),Te(r,i=>n(i),()=>n()),z(t,r),$()}function _i(t,e){J(e,!0);/**
 * @license @lucide/svelte v0.552.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let n=Se(e,["$$slots","$$events","$$legacy"]);const o=[["path",{d:"m15 18-6-6 6-6"}]];qo(t,Ln({name:"chevron-left"},()=>n,{get iconNode(){return o},children:(r,s)=>{var i=de(),a=ne(i);ye(a,()=>e.children??ke),z(r,i)},$$slots:{default:!0}})),$()}var ki=G('<a class="hover:text-accent flex w-full items-center justify-start gap-2"><!>Previous</a>'),Si=G('<a class="hover:text-accent flex w-full items-center justify-end gap-2">Next <!></a>'),Ei=G('<div class="mt-12 flex w-full"><!> <!></div>');function mn(t,e){var n=Ei(),o=Q(n);{var r=a=>{var f=ki(),u=Q(f);_i(u,{size:"1.2rem"}),$e(),q(f),ie(()=>oe(f,"href",`/${e.previousPost}`)),z(a,f)};ue(o,a=>{e.previousPost&&a(r)})}var s=j(o,2);{var i=a=>{var f=Si(),u=j(Q(f));jo(u,{size:"1.2rem"}),q(f),ie(()=>oe(f,"href",`/${e.nextPost}`)),z(a,f)};ue(s,a=>{e.nextPost&&a(i)})}q(n),z(t,n)}var Pi=G('<div class="export export-canvas w-full"><img class="w-full" alt="Excalidraw canvas"/></div>');function Ni(t,e){J(e,!0);let n=ce("");Wr(async()=>{const s=await qr(()=>import("./-QzueJcz.js").then(a=>a.i),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url);(async()=>{const a=await s.loadFromBlob(new Blob([e.data],{type:"application/json"}),null,null),f=await s.exportToCanvas({elements:a.elements,appState:{...a.appState,exportWithDarkMode:!0},files:a.files});A(n,f.toDataURL(),!0)})()});var o=Pi(),r=Q(o);q(o),ie(()=>oe(r,"src",l(n))),z(t,o),$()}var Ci=G("<div> </div>"),Mi=G("<div></div>");function Di(t,e){J(e,!0);const n=e.data.fileProperties;var o=Mi();tt(o,21,()=>n,Gt,(r,s)=>{var i=Ci(),a=Q(i,!0);q(i),ie(()=>we(a,l(s).ext)),z(r,i)}),q(o),z(t,o),$()}const Ii={passive:!1},Nt={capture:!0,passive:!1};function yn(t){t.stopImmediatePropagation()}function ft(t){t.preventDefault(),t.stopImmediatePropagation()}function Qo(t){var e=t.document.documentElement,n=Me(t).on("dragstart.drag",ft,Nt);"onselectstart"in e?n.on("selectstart.drag",ft,Nt):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Jo(t,e){var n=t.document.documentElement,o=Me(t).on("dragstart.drag",null);e&&(o.on("click.drag",ft,Nt),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Rt=t=>()=>t;function Pn(t,{sourceEvent:e,subject:n,target:o,identifier:r,active:s,x:i,y:a,dx:f,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}Pn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function zi(t){return!t.ctrlKey&&!t.button}function Ti(){return this.parentNode}function Ai(t,e){return e??{x:t.x,y:t.y}}function Oi(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hi(){var t=zi,e=Ti,n=Ai,o=Oi,r={},s=Zn("start","drag","end"),i=0,a,f,u,c,h=0;function d(S){S.on("mousedown.drag",y).filter(o).on("touchstart.drag",_).on("touchmove.drag",P,Ii).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(S,H){if(!(c||!t.call(this,S,H))){var I=T(this,e.call(this,S,H),S,H,"mouse");I&&(Me(S.view).on("mousemove.drag",v,Nt).on("mouseup.drag",x,Nt),Qo(S.view),yn(S),u=!1,a=S.clientX,f=S.clientY,I("start",S))}}function v(S){if(ft(S),!u){var H=S.clientX-a,I=S.clientY-f;u=H*H+I*I>h}r.mouse("drag",S)}function x(S){Me(S.view).on("mousemove.drag mouseup.drag",null),Jo(S.view,u),ft(S),r.mouse("end",S)}function _(S,H){if(t.call(this,S,H)){var I=S.changedTouches,K=e.call(this,S,H),M=I.length,V,X;for(V=0;V<M;++V)(X=T(this,K,S,H,I[V].identifier,I[V]))&&(yn(S),X("start",S,I[V]))}}function P(S){var H=S.changedTouches,I=H.length,K,M;for(K=0;K<I;++K)(M=r[H[K].identifier])&&(ft(S),M("drag",S,H[K]))}function N(S){var H=S.changedTouches,I=H.length,K,M;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),K=0;K<I;++K)(M=r[H[K].identifier])&&(yn(S),M("end",S,H[K]))}function T(S,H,I,K,M,V){var X=s.copy(),E=Re(V||I,H),p,k,g;if((g=n.call(S,new Pn("beforestart",{sourceEvent:I,target:d,identifier:M,active:i,x:E[0],y:E[1],dx:0,dy:0,dispatch:X}),K))!=null)return p=g.x-E[0]||0,k=g.y-E[1]||0,function w(b,C,D){var O=E,R;switch(b){case"start":r[M]=w,R=i++;break;case"end":delete r[M],--i;case"drag":E=Re(D||C,H),R=i;break}X.call(b,S,new Pn(b,{sourceEvent:C,subject:g,target:d,identifier:M,active:R,x:E[0]+p,y:E[1]+k,dx:E[0]-O[0],dy:E[1]-O[1],dispatch:X}),K)}}return d.filter=function(S){return arguments.length?(t=typeof S=="function"?S:Rt(!!S),d):t},d.container=function(S){return arguments.length?(e=typeof S=="function"?S:Rt(S),d):e},d.subject=function(S){return arguments.length?(n=typeof S=="function"?S:Rt(S),d):n},d.touchable=function(S){return arguments.length?(o=typeof S=="function"?S:Rt(!!S),d):o},d.on=function(){var S=s.on.apply(s,arguments);return S===s?d:S},d.clickDistance=function(S){return arguments.length?(h=(S=+S)*S,d):Math.sqrt(h)},d}function Xn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $o(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function Tt(){}var Ct=.7,Ut=1/Ct,ht="\\s*([+-]?\\d+)\\s*",Mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Le="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ri=/^#([0-9a-f]{3,8})$/,Vi=new RegExp(`^rgb\\(${ht},${ht},${ht}\\)$`),Li=new RegExp(`^rgb\\(${Le},${Le},${Le}\\)$`),Ki=new RegExp(`^rgba\\(${ht},${ht},${ht},${Mt}\\)$`),Bi=new RegExp(`^rgba\\(${Le},${Le},${Le},${Mt}\\)$`),Zi=new RegExp(`^hsl\\(${Mt},${Le},${Le}\\)$`),Yi=new RegExp(`^hsla\\(${Mt},${Le},${Le},${Mt}\\)$`),ao={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xn(Tt,nt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:lo,formatHex:lo,formatHex8:Xi,formatHsl:Fi,formatRgb:co,toString:co});function lo(){return this.rgb().formatHex()}function Xi(){return this.rgb().formatHex8()}function Fi(){return er(this).formatHsl()}function co(){return this.rgb().formatRgb()}function nt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ri.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?uo(e):n===3?new be(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Vt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Vt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Vi.exec(t))?new be(e[1],e[2],e[3],1):(e=Li.exec(t))?new be(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ki.exec(t))?Vt(e[1],e[2],e[3],e[4]):(e=Bi.exec(t))?Vt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Zi.exec(t))?go(e[1],e[2]/100,e[3]/100,1):(e=Yi.exec(t))?go(e[1],e[2]/100,e[3]/100,e[4]):ao.hasOwnProperty(t)?uo(ao[t]):t==="transparent"?new be(NaN,NaN,NaN,0):null}function uo(t){return new be(t>>16&255,t>>8&255,t&255,1)}function Vt(t,e,n,o){return o<=0&&(t=e=n=NaN),new be(t,e,n,o)}function Wi(t){return t instanceof Tt||(t=nt(t)),t?(t=t.rgb(),new be(t.r,t.g,t.b,t.opacity)):new be}function Nn(t,e,n,o){return arguments.length===1?Wi(t):new be(t,e,n,o??1)}function be(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}Xn(be,Nn,$o(Tt,{brighter(t){return t=t==null?Ut:Math.pow(Ut,t),new be(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ct:Math.pow(Ct,t),new be(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new be(Je(this.r),Je(this.g),Je(this.b),jt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fo,formatHex:fo,formatHex8:qi,formatRgb:ho,toString:ho}));function fo(){return`#${Qe(this.r)}${Qe(this.g)}${Qe(this.b)}`}function qi(){return`#${Qe(this.r)}${Qe(this.g)}${Qe(this.b)}${Qe((isNaN(this.opacity)?1:this.opacity)*255)}`}function ho(){const t=jt(this.opacity);return`${t===1?"rgb(":"rgba("}${Je(this.r)}, ${Je(this.g)}, ${Je(this.b)}${t===1?")":`, ${t})`}`}function jt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Je(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Qe(t){return t=Je(t),(t<16?"0":"")+t.toString(16)}function go(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new De(t,e,n,o)}function er(t){if(t instanceof De)return new De(t.h,t.s,t.l,t.opacity);if(t instanceof Tt||(t=nt(t)),!t)return new De;if(t instanceof De)return t;t=t.rgb();var e=t.r/255,n=t.g/255,o=t.b/255,r=Math.min(e,n,o),s=Math.max(e,n,o),i=NaN,a=s-r,f=(s+r)/2;return a?(e===s?i=(n-o)/a+(n<o)*6:n===s?i=(o-e)/a+2:i=(e-n)/a+4,a/=f<.5?s+r:2-s-r,i*=60):a=f>0&&f<1?0:i,new De(i,a,f,t.opacity)}function Gi(t,e,n,o){return arguments.length===1?er(t):new De(t,e,n,o??1)}function De(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}Xn(De,Gi,$o(Tt,{brighter(t){return t=t==null?Ut:Math.pow(Ut,t),new De(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ct:Math.pow(Ct,t),new De(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,r=2*n-o;return new be(vn(t>=240?t-240:t+120,r,o),vn(t,r,o),vn(t<120?t+240:t-120,r,o),this.opacity)},clamp(){return new De(mo(this.h),Lt(this.s),Lt(this.l),jt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=jt(this.opacity);return`${t===1?"hsl(":"hsla("}${mo(this.h)}, ${Lt(this.s)*100}%, ${Lt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function mo(t){return t=(t||0)%360,t<0?t+360:t}function Lt(t){return Math.max(0,Math.min(1,t||0))}function vn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const sn=t=>()=>t;function tr(t,e){return function(n){return t+n*e}}function Ui(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}function Sd(t,e){var n=e-t;return n?tr(t,n>180||n<-180?n-360*Math.round(n/360):n):sn(isNaN(t)?e:t)}function ji(t){return(t=+t)==1?nr:function(e,n){return n-e?Ui(e,n,t):sn(isNaN(e)?n:e)}}function nr(t,e){var n=e-t;return n?tr(t,n):sn(isNaN(t)?e:t)}const Qt=(function t(e){var n=ji(e);function o(r,s){var i=n((r=Nn(r)).r,(s=Nn(s)).r),a=n(r.g,s.g),f=n(r.b,s.b),u=nr(r.opacity,s.opacity);return function(c){return r.r=i(c),r.g=a(c),r.b=f(c),r.opacity=u(c),r+""}}return o.gamma=t,o})(1);function Qi(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,o=e.slice(),r;return function(s){for(r=0;r<n;++r)o[r]=t[r]*(1-s)+e[r]*s;return o}}function Ji(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function $i(t,e){var n=e?e.length:0,o=t?Math.min(n,t.length):0,r=new Array(o),s=new Array(n),i;for(i=0;i<o;++i)r[i]=Et(t[i],e[i]);for(;i<n;++i)s[i]=e[i];return function(a){for(i=0;i<o;++i)s[i]=r[i](a);return s}}function es(t,e){var n=new Date;return t=+t,e=+e,function(o){return n.setTime(t*(1-o)+e*o),n}}function Ve(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ts(t,e){var n={},o={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=Et(t[r],e[r]):o[r]=e[r];return function(s){for(r in n)o[r]=n[r](s);return o}}var Cn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pn=new RegExp(Cn.source,"g");function ns(t){return function(){return t}}function os(t){return function(e){return t(e)+""}}function or(t,e){var n=Cn.lastIndex=pn.lastIndex=0,o,r,s,i=-1,a=[],f=[];for(t=t+"",e=e+"";(o=Cn.exec(t))&&(r=pn.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),a[i]?a[i]+=s:a[++i]=s),(o=o[0])===(r=r[0])?a[i]?a[i]+=r:a[++i]=r:(a[++i]=null,f.push({i,x:Ve(o,r)})),n=pn.lastIndex;return n<e.length&&(s=e.slice(n),a[i]?a[i]+=s:a[++i]=s),a.length<2?f[0]?os(f[0].x):ns(e):(e=f.length,function(u){for(var c=0,h;c<e;++c)a[(h=f[c]).i]=h.x(u);return a.join("")})}function Et(t,e){var n=typeof e,o;return e==null||n==="boolean"?sn(e):(n==="number"?Ve:n==="string"?(o=nt(e))?(e=o,Qt):or:e instanceof nt?Qt:e instanceof Date?es:Ji(e)?Qi:Array.isArray(e)?$i:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ts:Ve)(t,e)}var yo=180/Math.PI,Mn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rr(t,e,n,o,r,s){var i,a,f;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(f=t*n+e*o)&&(n-=t*f,o-=e*f),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,f/=a),t*o<e*n&&(t=-t,e=-e,f=-f,i=-i),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*yo,skewX:Math.atan(f)*yo,scaleX:i,scaleY:a}}var Kt;function rs(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Mn:rr(e.a,e.b,e.c,e.d,e.e,e.f)}function is(t){return t==null||(Kt||(Kt=document.createElementNS("http://www.w3.org/2000/svg","g")),Kt.setAttribute("transform",t),!(t=Kt.transform.baseVal.consolidate()))?Mn:(t=t.matrix,rr(t.a,t.b,t.c,t.d,t.e,t.f))}function ir(t,e,n,o){function r(u){return u.length?u.pop()+" ":""}function s(u,c,h,d,y,v){if(u!==h||c!==d){var x=y.push("translate(",null,e,null,n);v.push({i:x-4,x:Ve(u,h)},{i:x-2,x:Ve(c,d)})}else(h||d)&&y.push("translate("+h+e+d+n)}function i(u,c,h,d){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),d.push({i:h.push(r(h)+"rotate(",null,o)-2,x:Ve(u,c)})):c&&h.push(r(h)+"rotate("+c+o)}function a(u,c,h,d){u!==c?d.push({i:h.push(r(h)+"skewX(",null,o)-2,x:Ve(u,c)}):c&&h.push(r(h)+"skewX("+c+o)}function f(u,c,h,d,y,v){if(u!==h||c!==d){var x=y.push(r(y)+"scale(",null,",",null,")");v.push({i:x-4,x:Ve(u,h)},{i:x-2,x:Ve(c,d)})}else(h!==1||d!==1)&&y.push(r(y)+"scale("+h+","+d+")")}return function(u,c){var h=[],d=[];return u=t(u),c=t(c),s(u.translateX,u.translateY,c.translateX,c.translateY,h,d),i(u.rotate,c.rotate,h,d),a(u.skewX,c.skewX,h,d),f(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,d),u=c=null,function(y){for(var v=-1,x=d.length,_;++v<x;)h[(_=d[v]).i]=_.x(y);return h.join("")}}}var ss=ir(rs,"px, ","px)","deg)"),as=ir(is,", ",")",")"),ls=1e-12;function vo(t){return((t=Math.exp(t))+1/t)/2}function cs(t){return((t=Math.exp(t))-1/t)/2}function ds(t){return((t=Math.exp(2*t))-1)/(t+1)}const Yt=(function t(e,n,o){function r(s,i){var a=s[0],f=s[1],u=s[2],c=i[0],h=i[1],d=i[2],y=c-a,v=h-f,x=y*y+v*v,_,P;if(x<ls)P=Math.log(d/u)/e,_=function(K){return[a+K*y,f+K*v,u*Math.exp(e*K*P)]};else{var N=Math.sqrt(x),T=(d*d-u*u+o*x)/(2*u*n*N),S=(d*d-u*u-o*x)/(2*d*n*N),H=Math.log(Math.sqrt(T*T+1)-T),I=Math.log(Math.sqrt(S*S+1)-S);P=(I-H)/e,_=function(K){var M=K*P,V=vo(H),X=u/(n*N)*(V*ds(e*M+H)-cs(H));return[a+X*y,f+X*v,u*V/vo(e*M+H)]}}return _.duration=P*1e3*e/Math.SQRT2,_}return r.rho=function(s){var i=Math.max(.001,+s),a=i*i,f=a*a;return t(i,a,f)},r})(Math.SQRT2,2,4);function po(t,e,n){var o=new ti;return e=e==null?0:+e,o.restart(r=>{o.stop(),t(r+e)},e,n),o}var us=Zn("start","end","cancel","interrupt"),fs=[],sr=0,xo=1,Dn=2,Xt=3,wo=4,In=5,Ft=6;function an(t,e,n,o,r,s){var i=t.__transition;if(!i)t.__transition={};else if(n in i)return;hs(t,n,{name:e,index:o,group:r,on:us,tween:fs,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:sr})}function Fn(t,e){var n=Ae(t,e);if(n.state>sr)throw new Error("too late; already scheduled");return n}function Be(t,e){var n=Ae(t,e);if(n.state>Xt)throw new Error("too late; already running");return n}function Ae(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function hs(t,e,n){var o=t.__transition,r;o[e]=n,n.timer=ni(s,0,n.time);function s(u){n.state=xo,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var c,h,d,y;if(n.state!==xo)return f();for(c in o)if(y=o[c],y.name===n.name){if(y.state===Xt)return po(i);y.state===wo?(y.state=Ft,y.timer.stop(),y.on.call("interrupt",t,t.__data__,y.index,y.group),delete o[c]):+c<e&&(y.state=Ft,y.timer.stop(),y.on.call("cancel",t,t.__data__,y.index,y.group),delete o[c])}if(po(function(){n.state===Xt&&(n.state=wo,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Dn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Dn){for(n.state=Xt,r=new Array(d=n.tween.length),c=0,h=-1;c<d;++c)(y=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++h]=y);r.length=h+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(f),n.state=In,1),h=-1,d=r.length;++h<d;)r[h].call(t,c);n.state===In&&(n.on.call("end",t,t.__data__,n.index,n.group),f())}function f(){n.state=Ft,n.timer.stop(),delete o[e];for(var u in o)return;delete t.__transition}}function Wt(t,e){var n=t.__transition,o,r,s=!0,i;if(n){e=e==null?null:e+"";for(i in n){if((o=n[i]).name!==e){s=!1;continue}r=o.state>Dn&&o.state<In,o.state=Ft,o.timer.stop(),o.on.call(r?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete n[i]}s&&delete t.__transition}}function gs(t){return this.each(function(){Wt(this,t)})}function ms(t,e){var n,o;return function(){var r=Be(this,t),s=r.tween;if(s!==n){o=n=s;for(var i=0,a=o.length;i<a;++i)if(o[i].name===e){o=o.slice(),o.splice(i,1);break}}r.tween=o}}function ys(t,e,n){var o,r;if(typeof n!="function")throw new Error;return function(){var s=Be(this,t),i=s.tween;if(i!==o){r=(o=i).slice();for(var a={name:e,value:n},f=0,u=r.length;f<u;++f)if(r[f].name===e){r[f]=a;break}f===u&&r.push(a)}s.tween=r}}function vs(t,e){var n=this._id;if(t+="",arguments.length<2){for(var o=Ae(this.node(),n).tween,r=0,s=o.length,i;r<s;++r)if((i=o[r]).name===t)return i.value;return null}return this.each((e==null?ms:ys)(n,t,e))}function Wn(t,e,n){var o=t._id;return t.each(function(){var r=Be(this,o);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Ae(r,o).value[e]}}function ar(t,e){var n;return(typeof e=="number"?Ve:e instanceof nt?Qt:(n=nt(e))?(e=n,Qt):or)(t,e)}function ps(t){return function(){this.removeAttribute(t)}}function xs(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ws(t,e,n){var o,r=n+"",s;return function(){var i=this.getAttribute(t);return i===r?null:i===o?s:s=e(o=i,n)}}function bs(t,e,n){var o,r=n+"",s;return function(){var i=this.getAttributeNS(t.space,t.local);return i===r?null:i===o?s:s=e(o=i,n)}}function _s(t,e,n){var o,r,s;return function(){var i,a=n(this),f;return a==null?void this.removeAttribute(t):(i=this.getAttribute(t),f=a+"",i===f?null:i===o&&f===r?s:(r=f,s=e(o=i,a)))}}function ks(t,e,n){var o,r,s;return function(){var i,a=n(this),f;return a==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),f=a+"",i===f?null:i===o&&f===r?s:(r=f,s=e(o=i,a)))}}function Ss(t,e){var n=Uo(t),o=n==="transform"?as:ar;return this.attrTween(t,typeof e=="function"?(n.local?ks:_s)(n,o,Wn(this,"attr."+t,e)):e==null?(n.local?xs:ps)(n):(n.local?bs:ws)(n,o,e))}function Es(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Ps(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ns(t,e){var n,o;function r(){var s=e.apply(this,arguments);return s!==o&&(n=(o=s)&&Ps(t,s)),n}return r._value=e,r}function Cs(t,e){var n,o;function r(){var s=e.apply(this,arguments);return s!==o&&(n=(o=s)&&Es(t,s)),n}return r._value=e,r}function Ms(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var o=Uo(t);return this.tween(n,(o.local?Ns:Cs)(o,e))}function Ds(t,e){return function(){Fn(this,t).delay=+e.apply(this,arguments)}}function Is(t,e){return e=+e,function(){Fn(this,t).delay=e}}function zs(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ds:Is)(e,t)):Ae(this.node(),e).delay}function Ts(t,e){return function(){Be(this,t).duration=+e.apply(this,arguments)}}function As(t,e){return e=+e,function(){Be(this,t).duration=e}}function Os(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ts:As)(e,t)):Ae(this.node(),e).duration}function Hs(t,e){if(typeof e!="function")throw new Error;return function(){Be(this,t).ease=e}}function Rs(t){var e=this._id;return arguments.length?this.each(Hs(e,t)):Ae(this.node(),e).ease}function Vs(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Be(this,t).ease=n}}function Ls(t){if(typeof t!="function")throw new Error;return this.each(Vs(this._id,t))}function Ks(t){typeof t!="function"&&(t=oi(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var s=e[r],i=s.length,a=o[r]=[],f,u=0;u<i;++u)(f=s[u])&&t.call(f,f.__data__,u,s)&&a.push(f);return new We(o,this._parents,this._name,this._id)}function Bs(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,o=e.length,r=n.length,s=Math.min(o,r),i=new Array(o),a=0;a<s;++a)for(var f=e[a],u=n[a],c=f.length,h=i[a]=new Array(c),d,y=0;y<c;++y)(d=f[y]||u[y])&&(h[y]=d);for(;a<o;++a)i[a]=e[a];return new We(i,this._parents,this._name,this._id)}function Zs(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Ys(t,e,n){var o,r,s=Zs(e)?Fn:Be;return function(){var i=s(this,t),a=i.on;a!==o&&(r=(o=a).copy()).on(e,n),i.on=r}}function Xs(t,e){var n=this._id;return arguments.length<2?Ae(this.node(),n).on.on(t):this.each(Ys(n,t,e))}function Fs(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Ws(){return this.on("end.remove",Fs(this._id))}function qs(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ri(t));for(var o=this._groups,r=o.length,s=new Array(r),i=0;i<r;++i)for(var a=o[i],f=a.length,u=s[i]=new Array(f),c,h,d=0;d<f;++d)(c=a[d])&&(h=t.call(c,c.__data__,d,a))&&("__data__"in c&&(h.__data__=c.__data__),u[d]=h,an(u[d],e,n,d,u,Ae(c,n)));return new We(s,this._parents,e,n)}function Gs(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ii(t));for(var o=this._groups,r=o.length,s=[],i=[],a=0;a<r;++a)for(var f=o[a],u=f.length,c,h=0;h<u;++h)if(c=f[h]){for(var d=t.call(c,c.__data__,h,f),y,v=Ae(c,n),x=0,_=d.length;x<_;++x)(y=d[x])&&an(y,e,n,x,d,v);s.push(d),i.push(c)}return new We(s,i,e,n)}var Us=rn.prototype.constructor;function js(){return new Us(this._groups,this._parents)}function Qs(t,e){var n,o,r;return function(){var s=Pt(this,t),i=(this.style.removeProperty(t),Pt(this,t));return s===i?null:s===n&&i===o?r:r=e(n=s,o=i)}}function lr(t){return function(){this.style.removeProperty(t)}}function Js(t,e,n){var o,r=n+"",s;return function(){var i=Pt(this,t);return i===r?null:i===o?s:s=e(o=i,n)}}function $s(t,e,n){var o,r,s;return function(){var i=Pt(this,t),a=n(this),f=a+"";return a==null&&(f=a=(this.style.removeProperty(t),Pt(this,t))),i===f?null:i===o&&f===r?s:(r=f,s=e(o=i,a))}}function ea(t,e){var n,o,r,s="style."+e,i="end."+s,a;return function(){var f=Be(this,t),u=f.on,c=f.value[s]==null?a||(a=lr(e)):void 0;(u!==n||r!==c)&&(o=(n=u).copy()).on(i,r=c),f.on=o}}function ta(t,e,n){var o=(t+="")=="transform"?ss:ar;return e==null?this.styleTween(t,Qs(t,o)).on("end.style."+t,lr(t)):typeof e=="function"?this.styleTween(t,$s(t,o,Wn(this,"style."+t,e))).each(ea(this._id,t)):this.styleTween(t,Js(t,o,e),n).on("end.style."+t,null)}function na(t,e,n){return function(o){this.style.setProperty(t,e.call(this,o),n)}}function oa(t,e,n){var o,r;function s(){var i=e.apply(this,arguments);return i!==r&&(o=(r=i)&&na(t,i,n)),o}return s._value=e,s}function ra(t,e,n){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(e==null)return this.tween(o,null);if(typeof e!="function")throw new Error;return this.tween(o,oa(t,e,n??""))}function ia(t){return function(){this.textContent=t}}function sa(t){return function(){var e=t(this);this.textContent=e??""}}function aa(t){return this.tween("text",typeof t=="function"?sa(Wn(this,"text",t)):ia(t==null?"":t+""))}function la(t){return function(e){this.textContent=t.call(this,e)}}function ca(t){var e,n;function o(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&la(r)),e}return o._value=t,o}function da(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,ca(t))}function ua(){for(var t=this._name,e=this._id,n=cr(),o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,f,u=0;u<a;++u)if(f=i[u]){var c=Ae(f,e);an(f,t,n,u,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new We(o,this._parents,t,n)}function fa(){var t,e,n=this,o=n._id,r=n.size();return new Promise(function(s,i){var a={value:i},f={value:function(){--r===0&&s()}};n.each(function(){var u=Be(this,o),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(f)),u.on=e}),r===0&&s()})}var ha=0;function We(t,e,n,o){this._groups=t,this._parents=e,this._name=n,this._id=o}function cr(){return++ha}var Ye=rn.prototype;We.prototype={constructor:We,select:qs,selectAll:Gs,selectChild:Ye.selectChild,selectChildren:Ye.selectChildren,filter:Ks,merge:Bs,selection:js,transition:ua,call:Ye.call,nodes:Ye.nodes,node:Ye.node,size:Ye.size,empty:Ye.empty,each:Ye.each,on:Xs,attr:Ss,attrTween:Ms,style:ta,styleTween:ra,text:aa,textTween:da,remove:Ws,tween:vs,delay:zs,duration:Os,ease:Rs,easeVarying:Ls,end:fa,[Symbol.iterator]:Ye[Symbol.iterator]};function ga(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ma={time:null,delay:0,duration:250,ease:ga};function ya(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function va(t){var e,n;t instanceof We?(e=t._id,t=t._name):(e=cr(),(n=ma).time=si(),t=t==null?null:t+"");for(var o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,f,u=0;u<a;++u)(f=i[u])&&an(f,t,e,u,i,n||ya(f,e));return new We(o,this._parents,t,e)}rn.prototype.interrupt=gs;rn.prototype.transition=va;const Bt=t=>()=>t;function pa(t,{sourceEvent:e,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function Xe(t,e,n){this.k=t,this.x=e,this.y=n}Xe.prototype={constructor:Xe,scale:function(t){return t===1?this:new Xe(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Xe(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ln=new Xe(1,0,0);dr.prototype=Xe.prototype;function dr(t){for(;!t.__zoom;)if(!(t=t.parentNode))return ln;return t.__zoom}function xn(t){t.stopImmediatePropagation()}function St(t){t.preventDefault(),t.stopImmediatePropagation()}function xa(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function wa(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function bo(){return this.__zoom||ln}function ba(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function _a(){return navigator.maxTouchPoints||"ontouchstart"in this}function ka(t,e,n){var o=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],s=t.invertY(e[0][1])-n[0][1],i=t.invertY(e[1][1])-n[1][1];return t.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Sa(){var t=xa,e=wa,n=ka,o=ba,r=_a,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,f=Yt,u=Zn("start","zoom","end"),c,h,d,y=500,v=150,x=0,_=10;function P(g){g.property("__zoom",bo).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",V).on("dblclick.zoom",X).filter(r).on("touchstart.zoom",E).on("touchmove.zoom",p).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}P.transform=function(g,w,b,C){var D=g.selection?g.selection():g;D.property("__zoom",bo),g!==D?H(g,w,b,C):D.interrupt().each(function(){I(this,arguments).event(C).start().zoom(null,typeof w=="function"?w.apply(this,arguments):w).end()})},P.scaleBy=function(g,w,b,C){P.scaleTo(g,function(){var D=this.__zoom.k,O=typeof w=="function"?w.apply(this,arguments):w;return D*O},b,C)},P.scaleTo=function(g,w,b,C){P.transform(g,function(){var D=e.apply(this,arguments),O=this.__zoom,R=b==null?S(D):typeof b=="function"?b.apply(this,arguments):b,B=O.invert(R),F=typeof w=="function"?w.apply(this,arguments):w;return n(T(N(O,F),R,B),D,i)},b,C)},P.translateBy=function(g,w,b,C){P.transform(g,function(){return n(this.__zoom.translate(typeof w=="function"?w.apply(this,arguments):w,typeof b=="function"?b.apply(this,arguments):b),e.apply(this,arguments),i)},null,C)},P.translateTo=function(g,w,b,C,D){P.transform(g,function(){var O=e.apply(this,arguments),R=this.__zoom,B=C==null?S(O):typeof C=="function"?C.apply(this,arguments):C;return n(ln.translate(B[0],B[1]).scale(R.k).translate(typeof w=="function"?-w.apply(this,arguments):-w,typeof b=="function"?-b.apply(this,arguments):-b),O,i)},C,D)};function N(g,w){return w=Math.max(s[0],Math.min(s[1],w)),w===g.k?g:new Xe(w,g.x,g.y)}function T(g,w,b){var C=w[0]-b[0]*g.k,D=w[1]-b[1]*g.k;return C===g.x&&D===g.y?g:new Xe(g.k,C,D)}function S(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function H(g,w,b,C){g.on("start.zoom",function(){I(this,arguments).event(C).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(C).end()}).tween("zoom",function(){var D=this,O=arguments,R=I(D,O).event(C),B=e.apply(D,O),F=b==null?S(B):typeof b=="function"?b.apply(D,O):b,W=Math.max(B[1][0]-B[0][0],B[1][1]-B[0][1]),Z=D.__zoom,re=typeof w=="function"?w.apply(D,O):w,ee=f(Z.invert(F).concat(W/Z.k),re.invert(F).concat(W/re.k));return function(U){if(U===1)U=re;else{var te=ee(U),le=W/te[2];U=new Xe(le,F[0]-te[0]*le,F[1]-te[1]*le)}R.zoom(null,U)}})}function I(g,w,b){return!b&&g.__zooming||new K(g,w)}function K(g,w){this.that=g,this.args=w,this.active=0,this.sourceEvent=null,this.extent=e.apply(g,w),this.taps=0}K.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,w){return this.mouse&&g!=="mouse"&&(this.mouse[1]=w.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=w.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=w.invert(this.touch1[0])),this.that.__zoom=w,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var w=Me(this.that).datum();u.call(g,this.that,new pa(g,{sourceEvent:this.sourceEvent,target:P,transform:this.that.__zoom,dispatch:u}),w)}};function M(g,...w){if(!t.apply(this,arguments))return;var b=I(this,w).event(g),C=this.__zoom,D=Math.max(s[0],Math.min(s[1],C.k*Math.pow(2,o.apply(this,arguments)))),O=Re(g);if(b.wheel)(b.mouse[0][0]!==O[0]||b.mouse[0][1]!==O[1])&&(b.mouse[1]=C.invert(b.mouse[0]=O)),clearTimeout(b.wheel);else{if(C.k===D)return;b.mouse=[O,C.invert(O)],Wt(this),b.start()}St(g),b.wheel=setTimeout(R,v),b.zoom("mouse",n(T(N(C,D),b.mouse[0],b.mouse[1]),b.extent,i));function R(){b.wheel=null,b.end()}}function V(g,...w){if(d||!t.apply(this,arguments))return;var b=g.currentTarget,C=I(this,w,!0).event(g),D=Me(g.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",W,!0),O=Re(g,b),R=g.clientX,B=g.clientY;Qo(g.view),xn(g),C.mouse=[O,this.__zoom.invert(O)],Wt(this),C.start();function F(Z){if(St(Z),!C.moved){var re=Z.clientX-R,ee=Z.clientY-B;C.moved=re*re+ee*ee>x}C.event(Z).zoom("mouse",n(T(C.that.__zoom,C.mouse[0]=Re(Z,b),C.mouse[1]),C.extent,i))}function W(Z){D.on("mousemove.zoom mouseup.zoom",null),Jo(Z.view,C.moved),St(Z),C.event(Z).end()}}function X(g,...w){if(t.apply(this,arguments)){var b=this.__zoom,C=Re(g.changedTouches?g.changedTouches[0]:g,this),D=b.invert(C),O=b.k*(g.shiftKey?.5:2),R=n(T(N(b,O),C,D),e.apply(this,w),i);St(g),a>0?Me(this).transition().duration(a).call(H,R,C,g):Me(this).call(P.transform,R,C,g)}}function E(g,...w){if(t.apply(this,arguments)){var b=g.touches,C=b.length,D=I(this,w,g.changedTouches.length===C).event(g),O,R,B,F;for(xn(g),R=0;R<C;++R)B=b[R],F=Re(B,this),F=[F,this.__zoom.invert(F),B.identifier],D.touch0?!D.touch1&&D.touch0[2]!==F[2]&&(D.touch1=F,D.taps=0):(D.touch0=F,O=!0,D.taps=1+!!c);c&&(c=clearTimeout(c)),O&&(D.taps<2&&(h=F[0],c=setTimeout(function(){c=null},y)),Wt(this),D.start())}}function p(g,...w){if(this.__zooming){var b=I(this,w).event(g),C=g.changedTouches,D=C.length,O,R,B,F;for(St(g),O=0;O<D;++O)R=C[O],B=Re(R,this),b.touch0&&b.touch0[2]===R.identifier?b.touch0[0]=B:b.touch1&&b.touch1[2]===R.identifier&&(b.touch1[0]=B);if(R=b.that.__zoom,b.touch1){var W=b.touch0[0],Z=b.touch0[1],re=b.touch1[0],ee=b.touch1[1],U=(U=re[0]-W[0])*U+(U=re[1]-W[1])*U,te=(te=ee[0]-Z[0])*te+(te=ee[1]-Z[1])*te;R=N(R,Math.sqrt(U/te)),B=[(W[0]+re[0])/2,(W[1]+re[1])/2],F=[(Z[0]+ee[0])/2,(Z[1]+ee[1])/2]}else if(b.touch0)B=b.touch0[0],F=b.touch0[1];else return;b.zoom("touch",n(T(R,B,F),b.extent,i))}}function k(g,...w){if(this.__zooming){var b=I(this,w).event(g),C=g.changedTouches,D=C.length,O,R;for(xn(g),d&&clearTimeout(d),d=setTimeout(function(){d=null},y),O=0;O<D;++O)R=C[O],b.touch0&&b.touch0[2]===R.identifier?delete b.touch0:b.touch1&&b.touch1[2]===R.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(R=Re(R,this),Math.hypot(h[0]-R[0],h[1]-R[1])<_)){var B=Me(this).on("dblclick.zoom");B&&B.apply(this,arguments)}}}return P.wheelDelta=function(g){return arguments.length?(o=typeof g=="function"?g:Bt(+g),P):o},P.filter=function(g){return arguments.length?(t=typeof g=="function"?g:Bt(!!g),P):t},P.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Bt(!!g),P):r},P.extent=function(g){return arguments.length?(e=typeof g=="function"?g:Bt([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),P):e},P.scaleExtent=function(g){return arguments.length?(s[0]=+g[0],s[1]=+g[1],P):[s[0],s[1]]},P.translateExtent=function(g){return arguments.length?(i[0][0]=+g[0][0],i[1][0]=+g[1][0],i[0][1]=+g[0][1],i[1][1]=+g[1][1],P):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},P.constrain=function(g){return arguments.length?(n=g,P):n},P.duration=function(g){return arguments.length?(a=+g,P):a},P.interpolate=function(g){return arguments.length?(f=g,P):f},P.on=function(){var g=u.on.apply(u,arguments);return g===u?P:g},P.clickDistance=function(g){return arguments.length?(x=(g=+g)*g,P):Math.sqrt(x)},P.tapDistance=function(g){return arguments.length?(_=+g,P):_},P}const Dt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,{id:e,sourceHandle:n,targetHandle:o})=>`Couldn't create edge for ${t} handle id: "${t==="source"?n:o}", edge id: ${e}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(t="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${t}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},zn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ur=["Enter"," ","Escape"],Ea={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:t,x:e,y:n})=>`Moved selected node ${t}. New position, x: ${e}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var mt;(function(t){t.Strict="strict",t.Loose="loose"})(mt||(mt={}));var gt;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(gt||(gt={}));var Jt;(function(t){t.Partial="partial",t.Full="full"})(Jt||(Jt={}));const Tn={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var qe;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(qe||(qe={}));var $t;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})($t||($t={}));var Y;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(Y||(Y={}));const _o={[Y.Left]:Y.Right,[Y.Right]:Y.Left,[Y.Top]:Y.Bottom,[Y.Bottom]:Y.Top};function Pa(t,e){if(!t&&!e)return!0;if(!t||!e||t.size!==e.size)return!1;if(!t.size&&!e.size)return!0;for(const n of t.keys())if(!e.has(n))return!1;return!0}function ko(t,e,n){if(!n)return;const o=[];t.forEach((r,s)=>{e?.has(s)||o.push(r)}),o.length&&n(o)}function Na(t){return t===null?null:t?"valid":"invalid"}const fr=t=>"id"in t&&"source"in t&&"target"in t,Ca=t=>"id"in t&&"position"in t&&!("source"in t)&&!("target"in t),qn=t=>"id"in t&&"internals"in t&&!("source"in t)&&!("target"in t),At=(t,e=[0,0])=>{const{width:n,height:o}=st(t),r=t.origin??e,s=n*r[0],i=o*r[1];return{x:t.position.x-s,y:t.position.y-i}},Ma=(t,e={nodeOrigin:[0,0]})=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((o,r)=>{const s=typeof r=="string";let i=!e.nodeLookup&&!s?r:void 0;e.nodeLookup&&(i=s?e.nodeLookup.get(r):qn(r)?r:e.nodeLookup.get(r.id));const a=i?en(i,e.nodeOrigin):{x:0,y:0,x2:0,y2:0};return dn(o,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return un(n)},cn=(t,e={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},o=!1;return t.forEach(r=>{(e.filter===void 0||e.filter(r))&&(n=dn(n,en(r)),o=!0)}),o?un(n):{x:0,y:0,width:0,height:0}},Gn=(t,e,[n,o,r]=[0,0,1],s=!1,i=!1)=>{const a={...Ht(e,[n,o,r]),width:e.width/r,height:e.height/r},f=[];for(const u of t.values()){const{measured:c,selectable:h=!0,hidden:d=!1}=u;if(i&&!h||d)continue;const y=c.width??u.width??u.initialWidth??null,v=c.height??u.height??u.initialHeight??null,x=It(a,vt(u)),_=(y??0)*(v??0),P=s&&x>0;(!u.internals.handleBounds||P||x>=_||u.dragging)&&f.push(u)}return f},Da=(t,e)=>{const n=new Set;return t.forEach(o=>{n.add(o.id)}),e.filter(o=>n.has(o.source)||n.has(o.target))};function Ia(t,e){const n=new Map,o=e?.nodes?new Set(e.nodes.map(r=>r.id)):null;return t.forEach(r=>{r.measured.width&&r.measured.height&&(e?.includeHiddenNodes||!r.hidden)&&(!o||o.has(r.id))&&n.set(r.id,r)}),n}async function za({nodes:t,width:e,height:n,panZoom:o,minZoom:r,maxZoom:s},i){if(t.size===0)return Promise.resolve(!0);const a=Ia(t,i),f=cn(a),u=Un(f,e,n,i?.minZoom??r,i?.maxZoom??s,i?.padding??.1);return await o.setViewport(u,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)}function hr({nodeId:t,nextPosition:e,nodeLookup:n,nodeOrigin:o=[0,0],nodeExtent:r,onError:s}){const i=n.get(t),a=i.parentId?n.get(i.parentId):void 0,{x:f,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},c=i.origin??o;let h=i.extent||r;if(i.extent==="parent"&&!i.expandParent)if(!a)s?.("005",Dt.error005());else{const y=a.measured.width,v=a.measured.height;y&&v&&(h=[[f,u],[f+y,u+v]])}else a&&pt(i.extent)&&(h=[[i.extent[0][0]+f,i.extent[0][1]+u],[i.extent[1][0]+f,i.extent[1][1]+u]]);const d=pt(h)?ot(e,h,i.measured):e;return(i.measured.width===void 0||i.measured.height===void 0)&&s?.("015",Dt.error015()),{position:{x:d.x-f+(i.measured.width??0)*c[0],y:d.y-u+(i.measured.height??0)*c[1]},positionAbsolute:d}}async function Ta({nodesToRemove:t=[],edgesToRemove:e=[],nodes:n,edges:o,onBeforeDelete:r}){const s=new Set(t.map(d=>d.id)),i=[];for(const d of n){if(d.deletable===!1)continue;const y=s.has(d.id),v=!y&&d.parentId&&i.find(x=>x.id===d.parentId);(y||v)&&i.push(d)}const a=new Set(e.map(d=>d.id)),f=o.filter(d=>d.deletable!==!1),c=Da(i,f);for(const d of f)a.has(d.id)&&!c.find(v=>v.id===d.id)&&c.push(d);if(!r)return{edges:c,nodes:i};const h=await r({nodes:i,edges:c});return typeof h=="boolean"?h?{edges:c,nodes:i}:{edges:[],nodes:[]}:h}const yt=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),ot=(t={x:0,y:0},e,n)=>({x:yt(t.x,e[0][0],e[1][0]-(n?.width??0)),y:yt(t.y,e[0][1],e[1][1]-(n?.height??0))});function gr(t,e,n){const{width:o,height:r}=st(n),{x:s,y:i}=n.internals.positionAbsolute;return ot(t,[[s,i],[s+o,i+r]],e)}const So=(t,e,n)=>t<e?yt(Math.abs(t-e),1,e)/e:t>n?-yt(Math.abs(t-n),1,e)/e:0,mr=(t,e,n=15,o=40)=>{const r=So(t.x,o,e.width-o)*n,s=So(t.y,o,e.height-o)*n;return[r,s]},dn=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),An=({x:t,y:e,width:n,height:o})=>({x:t,y:e,x2:t+n,y2:e+o}),un=({x:t,y:e,x2:n,y2:o})=>({x:t,y:e,width:n-t,height:o-e}),vt=(t,e=[0,0])=>{const{x:n,y:o}=qn(t)?t.internals.positionAbsolute:At(t,e);return{x:n,y:o,width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}},en=(t,e=[0,0])=>{const{x:n,y:o}=qn(t)?t.internals.positionAbsolute:At(t,e);return{x:n,y:o,x2:n+(t.measured?.width??t.width??t.initialWidth??0),y2:o+(t.measured?.height??t.height??t.initialHeight??0)}},Aa=(t,e)=>un(dn(An(t),An(e))),It=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),o=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*o)},Eo=t=>Fe(t.width)&&Fe(t.height)&&Fe(t.x)&&Fe(t.y),Fe=t=>!isNaN(t)&&isFinite(t),Oa=(t,e)=>{},Ot=(t,e=[1,1])=>({x:e[0]*Math.round(t.x/e[0]),y:e[1]*Math.round(t.y/e[1])}),Ht=({x:t,y:e},[n,o,r],s=!1,i=[1,1])=>{const a={x:(t-n)/r,y:(e-o)/r};return s?Ot(a,i):a},tn=({x:t,y:e},[n,o,r])=>({x:t*r+n,y:e*r+o});function dt(t,e){if(typeof t=="number")return Math.floor((e-e/(1+t))*.5);if(typeof t=="string"&&t.endsWith("px")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(n)}if(typeof t=="string"&&t.endsWith("%")){const n=parseFloat(t);if(!Number.isNaN(n))return Math.floor(e*n*.01)}return console.error(`[React Flow] The padding value "${t}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Ha(t,e,n){if(typeof t=="string"||typeof t=="number"){const o=dt(t,n),r=dt(t,e);return{top:o,right:r,bottom:o,left:r,x:r*2,y:o*2}}if(typeof t=="object"){const o=dt(t.top??t.y??0,n),r=dt(t.bottom??t.y??0,n),s=dt(t.left??t.x??0,e),i=dt(t.right??t.x??0,e);return{top:o,right:i,bottom:r,left:s,x:s+i,y:o+r}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Ra(t,e,n,o,r,s){const{x:i,y:a}=tn(t,[e,n,o]),{x:f,y:u}=tn({x:t.x+t.width,y:t.y+t.height},[e,n,o]),c=r-f,h=s-u;return{left:Math.floor(i),top:Math.floor(a),right:Math.floor(c),bottom:Math.floor(h)}}const Un=(t,e,n,o,r,s)=>{const i=Ha(s,e,n),a=(e-i.x)/t.width,f=(n-i.y)/t.height,u=Math.min(a,f),c=yt(u,o,r),h=t.x+t.width/2,d=t.y+t.height/2,y=e/2-h*c,v=n/2-d*c,x=Ra(t,y,v,c,e,n),_={left:Math.min(x.left-i.left,0),top:Math.min(x.top-i.top,0),right:Math.min(x.right-i.right,0),bottom:Math.min(x.bottom-i.bottom,0)};return{x:y-_.left+_.right,y:v-_.top+_.bottom,zoom:c}},nn=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function pt(t){return t!=null&&t!=="parent"}function st(t){return{width:t.measured?.width??t.width??t.initialWidth??0,height:t.measured?.height??t.height??t.initialHeight??0}}function Va(t){return(t.measured?.width??t.width??t.initialWidth)!==void 0&&(t.measured?.height??t.height??t.initialHeight)!==void 0}function La(t,e={width:0,height:0},n,o,r){const s={...t},i=o.get(n);if(i){const a=i.origin||r;s.x+=i.internals.positionAbsolute.x-(e.width??0)*a[0],s.y+=i.internals.positionAbsolute.y-(e.height??0)*a[1]}return s}function Ka(t){return{...Ea,...t||{}}}function wn(t,{snapGrid:e=[0,0],snapToGrid:n=!1,transform:o,containerBounds:r}){const{x:s,y:i}=Ie(t),a=Ht({x:s-(r?.left??0),y:i-(r?.top??0)},o),{x:f,y:u}=n?Ot(a,e):a;return{xSnapped:f,ySnapped:u,...a}}const yr=t=>({width:t.offsetWidth,height:t.offsetHeight}),vr=t=>t?.getRootNode?.()||window?.document,Ba=["INPUT","SELECT","TEXTAREA"];function pr(t){const e=t.composedPath?.()?.[0]||t.target;return e?.nodeType!==1?!1:Ba.includes(e.nodeName)||e.hasAttribute("contenteditable")||!!e.closest(".nokey")}const xr=t=>"clientX"in t,Ie=(t,e)=>{const n=xr(t),o=n?t.clientX:t.touches?.[0].clientX,r=n?t.clientY:t.touches?.[0].clientY;return{x:o-(e?.left??0),y:r-(e?.top??0)}},Po=(t,e,n,o,r)=>{const s=e.querySelectorAll(`.${t}`);return!s||!s.length?null:Array.from(s).map(i=>{const a=i.getBoundingClientRect();return{id:i.getAttribute("data-handleid"),type:t,nodeId:r,position:i.getAttribute("data-handlepos"),x:(a.left-n.left)/o,y:(a.top-n.top)/o,...yr(i)}})};function Za({sourceX:t,sourceY:e,targetX:n,targetY:o,sourceControlX:r,sourceControlY:s,targetControlX:i,targetControlY:a}){const f=t*.125+r*.375+i*.375+n*.125,u=e*.125+s*.375+a*.375+o*.125,c=Math.abs(f-t),h=Math.abs(u-e);return[f,u,c,h]}function Zt(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function No({pos:t,x1:e,y1:n,x2:o,y2:r,c:s}){switch(t){case Y.Left:return[e-Zt(e-o,s),n];case Y.Right:return[e+Zt(o-e,s),n];case Y.Top:return[e,n-Zt(n-r,s)];case Y.Bottom:return[e,n+Zt(r-n,s)]}}function wr({sourceX:t,sourceY:e,sourcePosition:n=Y.Bottom,targetX:o,targetY:r,targetPosition:s=Y.Top,curvature:i=.25}){const[a,f]=No({pos:n,x1:t,y1:e,x2:o,y2:r,c:i}),[u,c]=No({pos:s,x1:o,y1:r,x2:t,y2:e,c:i}),[h,d,y,v]=Za({sourceX:t,sourceY:e,targetX:o,targetY:r,sourceControlX:a,sourceControlY:f,targetControlX:u,targetControlY:c});return[`M${t},${e} C${a},${f} ${u},${c} ${o},${r}`,h,d,y,v]}function br({sourceX:t,sourceY:e,targetX:n,targetY:o}){const r=Math.abs(n-t)/2,s=n<t?n+r:n-r,i=Math.abs(o-e)/2,a=o<e?o+i:o-i;return[s,a,r,i]}function Ya({sourceNode:t,targetNode:e,selected:n=!1,zIndex:o=0,elevateOnSelect:r=!1,zIndexMode:s="basic"}){if(s==="manual")return o;const i=r&&n?o+1e3:o,a=Math.max(t.parentId||r&&t.selected?t.internals.z:0,e.parentId||r&&e.selected?e.internals.z:0);return i+a}function Xa({sourceNode:t,targetNode:e,width:n,height:o,transform:r}){const s=dn(en(t),en(e));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const i={x:-r[0]/r[2],y:-r[1]/r[2],width:n/r[2],height:o/r[2]};return It(i,un(s))>0}const Fa=({source:t,sourceHandle:e,target:n,targetHandle:o})=>`xy-edge__${t}${e||""}-${n}${o||""}`,Wa=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),qa=(t,e,n={})=>{if(!t.source||!t.target)return e;const o=n.getEdgeId||Fa;let r;return fr(t)?r={...t}:r={...t,id:o(t)},Wa(r,e)?e:(r.sourceHandle===null&&delete r.sourceHandle,r.targetHandle===null&&delete r.targetHandle,e.concat(r))};function _r({sourceX:t,sourceY:e,targetX:n,targetY:o}){const[r,s,i,a]=br({sourceX:t,sourceY:e,targetX:n,targetY:o});return[`M ${t},${e}L ${n},${o}`,r,s,i,a]}const Co={[Y.Left]:{x:-1,y:0},[Y.Right]:{x:1,y:0},[Y.Top]:{x:0,y:-1},[Y.Bottom]:{x:0,y:1}},Ga=({source:t,sourcePosition:e=Y.Bottom,target:n})=>e===Y.Left||e===Y.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Mo=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Ua({source:t,sourcePosition:e=Y.Bottom,target:n,targetPosition:o=Y.Top,center:r,offset:s,stepPosition:i}){const a=Co[e],f=Co[o],u={x:t.x+a.x*s,y:t.y+a.y*s},c={x:n.x+f.x*s,y:n.y+f.y*s},h=Ga({source:u,sourcePosition:e,target:c}),d=h.x!==0?"x":"y",y=h[d];let v=[],x,_;const P={x:0,y:0},N={x:0,y:0},[,,T,S]=br({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(a[d]*f[d]===-1){d==="x"?(x=r.x??u.x+(c.x-u.x)*i,_=r.y??(u.y+c.y)/2):(x=r.x??(u.x+c.x)/2,_=r.y??u.y+(c.y-u.y)*i);const I=[{x,y:u.y},{x,y:c.y}],K=[{x:u.x,y:_},{x:c.x,y:_}];a[d]===y?v=d==="x"?I:K:v=d==="x"?K:I}else{const I=[{x:u.x,y:c.y}],K=[{x:c.x,y:u.y}];if(d==="x"?v=a.x===y?K:I:v=a.y===y?I:K,e===o){const p=Math.abs(t[d]-n[d]);if(p<=s){const k=Math.min(s-1,s-p);a[d]===y?P[d]=(u[d]>t[d]?-1:1)*k:N[d]=(c[d]>n[d]?-1:1)*k}}if(e!==o){const p=d==="x"?"y":"x",k=a[d]===f[p],g=u[p]>c[p],w=u[p]<c[p];(a[d]===1&&(!k&&g||k&&w)||a[d]!==1&&(!k&&w||k&&g))&&(v=d==="x"?I:K)}const M={x:u.x+P.x,y:u.y+P.y},V={x:c.x+N.x,y:c.y+N.y},X=Math.max(Math.abs(M.x-v[0].x),Math.abs(V.x-v[0].x)),E=Math.max(Math.abs(M.y-v[0].y),Math.abs(V.y-v[0].y));X>=E?(x=(M.x+V.x)/2,_=v[0].y):(x=v[0].x,_=(M.y+V.y)/2)}return[[t,{x:u.x+P.x,y:u.y+P.y},...v,{x:c.x+N.x,y:c.y+N.y},n],x,_,T,S]}function ja(t,e,n,o){const r=Math.min(Mo(t,e)/2,Mo(e,n)/2,o),{x:s,y:i}=e;if(t.x===s&&s===n.x||t.y===i&&i===n.y)return`L${s} ${i}`;if(t.y===i){const u=t.x<n.x?-1:1,c=t.y<n.y?1:-1;return`L ${s+r*u},${i}Q ${s},${i} ${s},${i+r*c}`}const a=t.x<n.x?1:-1,f=t.y<n.y?-1:1;return`L ${s},${i+r*f}Q ${s},${i} ${s+r*a},${i}`}function jn({sourceX:t,sourceY:e,sourcePosition:n=Y.Bottom,targetX:o,targetY:r,targetPosition:s=Y.Top,borderRadius:i=5,centerX:a,centerY:f,offset:u=20,stepPosition:c=.5}){const[h,d,y,v,x]=Ua({source:{x:t,y:e},sourcePosition:n,target:{x:o,y:r},targetPosition:s,center:{x:a,y:f},offset:u,stepPosition:c});return[h.reduce((P,N,T)=>{let S="";return T>0&&T<h.length-1?S=ja(h[T-1],N,h[T+1],i):S=`${T===0?"M":"L"}${N.x} ${N.y}`,P+=S,P},""),d,y,v,x]}function Do(t){return t&&!!(t.internals.handleBounds||t.handles?.length)&&!!(t.measured.width||t.width||t.initialWidth)}function Qa(t){const{sourceNode:e,targetNode:n}=t;if(!Do(e)||!Do(n))return null;const o=e.internals.handleBounds||Io(e.handles),r=n.internals.handleBounds||Io(n.handles),s=zo(o?.source??[],t.sourceHandle),i=zo(t.connectionMode===mt.Strict?r?.target??[]:(r?.target??[]).concat(r?.source??[]),t.targetHandle);if(!s||!i)return t.onError?.("008",Dt.error008(s?"target":"source",{id:t.id,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle})),null;const a=s?.position||Y.Bottom,f=i?.position||Y.Top,u=rt(e,s,a),c=rt(n,i,f);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y,sourcePosition:a,targetPosition:f}}function Io(t){if(!t)return null;const e=[],n=[];for(const o of t)o.width=o.width??1,o.height=o.height??1,o.type==="source"?e.push(o):o.type==="target"&&n.push(o);return{source:e,target:n}}function rt(t,e,n=Y.Left,o=!1){const r=(e?.x??0)+t.internals.positionAbsolute.x,s=(e?.y??0)+t.internals.positionAbsolute.y,{width:i,height:a}=e??st(t);if(o)return{x:r+i/2,y:s+a/2};switch(e?.position??n){case Y.Top:return{x:r+i/2,y:s};case Y.Right:return{x:r+i,y:s+a/2};case Y.Bottom:return{x:r+i/2,y:s+a};case Y.Left:return{x:r,y:s+a/2}}}function zo(t,e){return t&&(e?t.find(n=>n.id===e):t[0])||null}function On(t,e){return t?typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(o=>`${o}=${t[o]}`).join("&")}`:""}function Ja(t,{id:e,defaultColor:n,defaultMarkerStart:o,defaultMarkerEnd:r}){const s=new Set;return t.reduce((i,a)=>([a.markerStart||o,a.markerEnd||r].forEach(f=>{if(f&&typeof f=="object"){const u=On(f,e);s.has(u)||(i.push({id:u,color:f.color||n,...f}),s.add(u))}}),i),[]).sort((i,a)=>i.id.localeCompare(a.id))}const kr=1e3,$a=10,Qn={nodeOrigin:[0,0],nodeExtent:zn,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},el={...Qn,checkEquality:!0};function Jn(t,e){const n={...t};for(const o in e)e[o]!==void 0&&(n[o]=e[o]);return n}function tl(t,e,n){const o=Jn(Qn,n);for(const r of t.values())if(r.parentId)eo(r,t,e,o);else{const s=At(r,o.nodeOrigin),i=pt(r.extent)?r.extent:o.nodeExtent,a=ot(s,i,st(r));r.internals.positionAbsolute=a}}function nl(t,e){if(!t.handles)return t.measured?e?.internals.handleBounds:void 0;const n=[],o=[];for(const r of t.handles){const s={id:r.id,width:r.width??1,height:r.height??1,nodeId:t.id,x:r.x,y:r.y,position:r.position,type:r.type};r.type==="source"?n.push(s):r.type==="target"&&o.push(s)}return{source:n,target:o}}function $n(t){return t==="manual"}function ol(t,e,n,o={}){const r=Jn(el,o),s={i:0},i=new Map(e),a=r?.elevateNodesOnSelect&&!$n(r.zIndexMode)?kr:0;let f=t.length>0;e.clear(),n.clear();for(const u of t){let c=i.get(u.id);if(r.checkEquality&&u===c?.internals.userNode)e.set(u.id,c);else{const h=At(u,r.nodeOrigin),d=pt(u.extent)?u.extent:r.nodeExtent,y=ot(h,d,st(u));c={...r.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:y,handleBounds:nl(u,c),z:Sr(u,a,r.zIndexMode),userNode:u}},e.set(u.id,c)}(c.measured===void 0||c.measured.width===void 0||c.measured.height===void 0)&&!c.hidden&&(f=!1),u.parentId&&eo(c,e,n,o,s)}return f}function rl(t,e){if(!t.parentId)return;const n=e.get(t.parentId);n?n.set(t.id,t):e.set(t.parentId,new Map([[t.id,t]]))}function eo(t,e,n,o,r){const{elevateNodesOnSelect:s,nodeOrigin:i,nodeExtent:a,zIndexMode:f}=Jn(Qn,o),u=t.parentId,c=e.get(u);if(!c){console.warn(`Parent node ${u} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}rl(t,n),r&&!c.parentId&&c.internals.rootParentIndex===void 0&&f==="auto"&&(c.internals.rootParentIndex=++r.i,c.internals.z=c.internals.z+r.i*$a),r&&c.internals.rootParentIndex!==void 0&&(r.i=c.internals.rootParentIndex);const h=s&&!$n(f)?kr:0,{x:d,y,z:v}=il(t,c,i,a,h,f),{positionAbsolute:x}=t.internals,_=d!==x.x||y!==x.y;(_||v!==t.internals.z)&&e.set(t.id,{...t,internals:{...t.internals,positionAbsolute:_?{x:d,y}:x,z:v}})}function Sr(t,e,n){const o=Fe(t.zIndex)?t.zIndex:0;return $n(n)?o:o+(t.selected?e:0)}function il(t,e,n,o,r,s){const{x:i,y:a}=e.internals.positionAbsolute,f=st(t),u=At(t,n),c=pt(t.extent)?ot(u,t.extent,f):u;let h=ot({x:i+c.x,y:a+c.y},o,f);t.extent==="parent"&&(h=gr(h,f,e));const d=Sr(t,r,s),y=e.internals.z??0;return{x:h.x,y:h.y,z:y>=d?y+1:d}}function sl(t,e,n,o=[0,0]){const r=[],s=new Map;for(const i of t){const a=e.get(i.parentId);if(!a)continue;const f=s.get(i.parentId)?.expandedRect??vt(a),u=Aa(f,i.rect);s.set(i.parentId,{expandedRect:u,parent:a})}return s.size>0&&s.forEach(({expandedRect:i,parent:a},f)=>{const u=a.internals.positionAbsolute,c=st(a),h=a.origin??o,d=i.x<u.x?Math.round(Math.abs(u.x-i.x)):0,y=i.y<u.y?Math.round(Math.abs(u.y-i.y)):0,v=Math.max(c.width,Math.round(i.width)),x=Math.max(c.height,Math.round(i.height)),_=(v-c.width)*h[0],P=(x-c.height)*h[1];(d>0||y>0||_||P)&&(r.push({id:f,type:"position",position:{x:a.position.x-d+_,y:a.position.y-y+P}}),n.get(f)?.forEach(N=>{t.some(T=>T.id===N.id)||r.push({id:N.id,type:"position",position:{x:N.position.x+d,y:N.position.y+y}})})),(c.width<i.width||c.height<i.height||d||y)&&r.push({id:f,type:"dimensions",setAttributes:!0,dimensions:{width:v+(d?h[0]*d-_:0),height:x+(y?h[1]*y-P:0)}})}),r}function al(t,e,n,o,r,s,i){const a=o?.querySelector(".xyflow__viewport");let f=!1;if(!a)return{changes:[],updatedInternals:f};const u=[],c=window.getComputedStyle(a),{m22:h}=new window.DOMMatrixReadOnly(c.transform),d=[];for(const y of t.values()){const v=e.get(y.id);if(!v)continue;if(v.hidden){e.set(v.id,{...v,internals:{...v.internals,handleBounds:void 0}}),f=!0;continue}const x=yr(y.nodeElement),_=v.measured.width!==x.width||v.measured.height!==x.height;if(!!(x.width&&x.height&&(_||!v.internals.handleBounds||y.force))){const N=y.nodeElement.getBoundingClientRect(),T=pt(v.extent)?v.extent:s;let{positionAbsolute:S}=v.internals;v.parentId&&v.extent==="parent"?S=gr(S,x,e.get(v.parentId)):T&&(S=ot(S,T,x));const H={...v,measured:x,internals:{...v.internals,positionAbsolute:S,handleBounds:{source:Po("source",y.nodeElement,N,h,v.id),target:Po("target",y.nodeElement,N,h,v.id)}}};e.set(v.id,H),v.parentId&&eo(H,e,n,{nodeOrigin:r,zIndexMode:i}),f=!0,_&&(u.push({id:v.id,type:"dimensions",dimensions:x}),v.expandParent&&v.parentId&&d.push({id:v.id,parentId:v.parentId,rect:vt(H,r)}))}}if(d.length>0){const y=sl(d,e,n,r);u.push(...y)}return{changes:u,updatedInternals:f}}async function ll({delta:t,panZoom:e,transform:n,translateExtent:o,width:r,height:s}){if(!e||!t.x&&!t.y)return Promise.resolve(!1);const i=await e.setViewportConstrained({x:n[0]+t.x,y:n[1]+t.y,zoom:n[2]},[[0,0],[r,s]],o),a=!!i&&(i.x!==n[0]||i.y!==n[1]||i.k!==n[2]);return Promise.resolve(a)}function To(t,e,n,o,r,s){let i=r;const a=o.get(i)||new Map;o.set(i,a.set(n,e)),i=`${r}-${t}`;const f=o.get(i)||new Map;if(o.set(i,f.set(n,e)),s){i=`${r}-${t}-${s}`;const u=o.get(i)||new Map;o.set(i,u.set(n,e))}}function cl(t,e,n){t.clear(),e.clear();for(const o of n){const{source:r,target:s,sourceHandle:i=null,targetHandle:a=null}=o,f={edgeId:o.id,source:r,target:s,sourceHandle:i,targetHandle:a},u=`${r}-${i}--${s}-${a}`,c=`${s}-${a}--${r}-${i}`;To("source",f,c,t,r,i),To("target",f,u,t,s,a),e.set(o.id,o)}}function Er(t,e){if(!t.parentId)return!1;const n=e.get(t.parentId);return n?n.selected?!0:Er(n,e):!1}function Ao(t,e,n){let o=t;do{if(o?.matches?.(e))return!0;if(o===n)return!1;o=o?.parentElement}while(o);return!1}function dl(t,e,n,o){const r=new Map;for(const[s,i]of t)if((i.selected||i.id===o)&&(!i.parentId||!Er(i,t))&&(i.draggable||e&&typeof i.draggable>"u")){const a=t.get(s);a&&r.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return r}function bn({nodeId:t,dragItems:e,nodeLookup:n,dragging:o=!0}){const r=[];for(const[i,a]of e){const f=n.get(i)?.internals.userNode;f&&r.push({...f,position:a.position,dragging:o})}if(!t)return[r[0],r];const s=n.get(t)?.internals.userNode;return[s?{...s,position:e.get(t)?.position||s.position,dragging:o}:r[0],r]}function ul({dragItems:t,snapGrid:e,x:n,y:o}){const r=t.values().next().value;if(!r)return null;const s={x:n-r.distance.x,y:o-r.distance.y},i=Ot(s,e);return{x:i.x-s.x,y:i.y-s.y}}function fl({onNodeMouseDown:t,getStoreItems:e,onDragStart:n,onDrag:o,onDragStop:r}){let s={x:null,y:null},i=0,a=new Map,f=!1,u={x:0,y:0},c=null,h=!1,d=null,y=!1,v=!1,x=null;function _({noDragClassName:N,handleSelector:T,domNode:S,isSelectable:H,nodeId:I,nodeClickDistance:K=0}){d=Me(S);function M({x:p,y:k}){const{nodeLookup:g,nodeExtent:w,snapGrid:b,snapToGrid:C,nodeOrigin:D,onNodeDrag:O,onSelectionDrag:R,onError:B,updateNodePositions:F}=e();s={x:p,y:k};let W=!1;const Z=a.size>1,re=Z&&w?An(cn(a)):null,ee=Z&&C?ul({dragItems:a,snapGrid:b,x:p,y:k}):null;for(const[U,te]of a){if(!g.has(U))continue;let le={x:p-te.distance.x,y:k-te.distance.y};C&&(le=ee?{x:Math.round(le.x+ee.x),y:Math.round(le.y+ee.y)}:Ot(le,b));let ve=null;if(Z&&w&&!te.extent&&re){const{positionAbsolute:fe}=te.internals,Ce=fe.x-re.x+w[0][0],at=fe.x+te.measured.width-re.x2+w[1][0],lt=fe.y-re.y+w[0][1],bt=fe.y+te.measured.height-re.y2+w[1][1];ve=[[Ce,lt],[at,bt]]}const{position:se,positionAbsolute:_e}=hr({nodeId:U,nextPosition:le,nodeLookup:g,nodeExtent:ve||w,nodeOrigin:D,onError:B});W=W||te.position.x!==se.x||te.position.y!==se.y,te.position=se,te.internals.positionAbsolute=_e}if(v=v||W,!!W&&(F(a,!0),x&&(o||O||!I&&R))){const[U,te]=bn({nodeId:I,dragItems:a,nodeLookup:g});o?.(x,a,U,te),O?.(x,U,te),I||R?.(x,te)}}async function V(){if(!c)return;const{transform:p,panBy:k,autoPanSpeed:g,autoPanOnNodeDrag:w}=e();if(!w){f=!1,cancelAnimationFrame(i);return}const[b,C]=mr(u,c,g);(b!==0||C!==0)&&(s.x=(s.x??0)-b/p[2],s.y=(s.y??0)-C/p[2],await k({x:b,y:C})&&M(s)),i=requestAnimationFrame(V)}function X(p){const{nodeLookup:k,multiSelectionActive:g,nodesDraggable:w,transform:b,snapGrid:C,snapToGrid:D,selectNodesOnDrag:O,onNodeDragStart:R,onSelectionDragStart:B,unselectNodesAndEdges:F}=e();h=!0,(!O||!H)&&!g&&I&&(k.get(I)?.selected||F()),H&&O&&I&&t?.(I);const W=wn(p.sourceEvent,{transform:b,snapGrid:C,snapToGrid:D,containerBounds:c});if(s=W,a=dl(k,w,W,I),a.size>0&&(n||R||!I&&B)){const[Z,re]=bn({nodeId:I,dragItems:a,nodeLookup:k});n?.(p.sourceEvent,a,Z,re),R?.(p.sourceEvent,Z,re),I||B?.(p.sourceEvent,re)}}const E=Hi().clickDistance(K).on("start",p=>{const{domNode:k,nodeDragThreshold:g,transform:w,snapGrid:b,snapToGrid:C}=e();c=k?.getBoundingClientRect()||null,y=!1,v=!1,x=p.sourceEvent,g===0&&X(p),s=wn(p.sourceEvent,{transform:w,snapGrid:b,snapToGrid:C,containerBounds:c}),u=Ie(p.sourceEvent,c)}).on("drag",p=>{const{autoPanOnNodeDrag:k,transform:g,snapGrid:w,snapToGrid:b,nodeDragThreshold:C,nodeLookup:D}=e(),O=wn(p.sourceEvent,{transform:g,snapGrid:w,snapToGrid:b,containerBounds:c});if(x=p.sourceEvent,(p.sourceEvent.type==="touchmove"&&p.sourceEvent.touches.length>1||I&&!D.has(I))&&(y=!0),!y){if(!f&&k&&h&&(f=!0,V()),!h){const R=Ie(p.sourceEvent,c),B=R.x-u.x,F=R.y-u.y;Math.sqrt(B*B+F*F)>C&&X(p)}(s.x!==O.xSnapped||s.y!==O.ySnapped)&&a&&h&&(u=Ie(p.sourceEvent,c),M(O))}}).on("end",p=>{if(!(!h||y)&&(f=!1,h=!1,cancelAnimationFrame(i),a.size>0)){const{nodeLookup:k,updateNodePositions:g,onNodeDragStop:w,onSelectionDragStop:b}=e();if(v&&(g(a,!1),v=!1),r||w||!I&&b){const[C,D]=bn({nodeId:I,dragItems:a,nodeLookup:k,dragging:!1});r?.(p.sourceEvent,a,C,D),w?.(p.sourceEvent,C,D),I||b?.(p.sourceEvent,D)}}}).filter(p=>{const k=p.target;return!p.button&&(!N||!Ao(k,`.${N}`,S))&&(!T||Ao(k,T,S))});d.call(E)}function P(){d?.on(".drag",null)}return{update:_,destroy:P}}function hl(t,e,n){const o=[],r={x:t.x-n,y:t.y-n,width:n*2,height:n*2};for(const s of e.values())It(r,vt(s))>0&&o.push(s);return o}const gl=250;function ml(t,e,n,o){let r=[],s=1/0;const i=hl(t,n,e+gl);for(const a of i){const f=[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]];for(const u of f){if(o.nodeId===u.nodeId&&o.type===u.type&&o.id===u.id)continue;const{x:c,y:h}=rt(a,u,u.position,!0),d=Math.sqrt(Math.pow(c-t.x,2)+Math.pow(h-t.y,2));d>e||(d<s?(r=[{...u,x:c,y:h}],s=d):d===s&&r.push({...u,x:c,y:h}))}}if(!r.length)return null;if(r.length>1){const a=o.type==="source"?"target":"source";return r.find(f=>f.type===a)??r[0]}return r[0]}function Pr(t,e,n,o,r,s=!1){const i=o.get(t);if(!i)return null;const a=r==="strict"?i.internals.handleBounds?.[e]:[...i.internals.handleBounds?.source??[],...i.internals.handleBounds?.target??[]],f=(n?a?.find(u=>u.id===n):a?.[0])??null;return f&&s?{...f,...rt(i,f,f.position,!0)}:f}function Nr(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function yl(t,e){let n=null;return e?n=!0:t&&!e&&(n=!1),n}const Cr=()=>!0;function vl(t,{connectionMode:e,connectionRadius:n,handleId:o,nodeId:r,edgeUpdaterType:s,isTarget:i,domNode:a,nodeLookup:f,lib:u,autoPanOnConnect:c,flowId:h,panBy:d,cancelConnection:y,onConnectStart:v,onConnect:x,onConnectEnd:_,isValidConnection:P=Cr,onReconnectEnd:N,updateConnection:T,getTransform:S,getFromHandle:H,autoPanSpeed:I,dragThreshold:K=1,handleDomNode:M}){const V=vr(t.target);let X=0,E;const{x:p,y:k}=Ie(t),g=Nr(s,M),w=a?.getBoundingClientRect();let b=!1;if(!w||!g)return;const C=Pr(r,g,o,f,e);if(!C)return;let D=Ie(t,w),O=!1,R=null,B=!1,F=null;function W(){if(!c||!w)return;const[se,_e]=mr(D,w,I);d({x:se,y:_e}),X=requestAnimationFrame(W)}const Z={...C,nodeId:r,type:g,position:C.position},re=f.get(r);let U={inProgress:!0,isValid:null,from:rt(re,Z,Y.Left,!0),fromHandle:Z,fromPosition:Z.position,fromNode:re,to:D,toHandle:null,toPosition:_o[Z.position],toNode:null,pointer:D};function te(){b=!0,T(U),v?.(t,{nodeId:r,handleId:o,handleType:g})}K===0&&te();function le(se){if(!b){const{x:bt,y:ae}=Ie(se),me=bt-p,Ze=ae-k;if(!(me*me+Ze*Ze>K*K))return;te()}if(!H()||!Z){ve(se);return}const _e=S();D=Ie(se,w),E=ml(Ht(D,_e,!1,[1,1]),n,f,Z),O||(W(),O=!0);const fe=Mr(se,{handle:E,connectionMode:e,fromNodeId:r,fromHandleId:o,fromType:i?"target":"source",isValidConnection:P,doc:V,lib:u,flowId:h,nodeLookup:f});F=fe.handleDomNode,R=fe.connection,B=yl(!!E,fe.isValid);const Ce=f.get(r),at=Ce?rt(Ce,Z,Y.Left,!0):U.from,lt={...U,from:at,isValid:B,to:fe.toHandle&&B?tn({x:fe.toHandle.x,y:fe.toHandle.y},_e):D,toHandle:fe.toHandle,toPosition:B&&fe.toHandle?fe.toHandle.position:_o[Z.position],toNode:fe.toHandle?f.get(fe.toHandle.nodeId):null,pointer:D};T(lt),U=lt}function ve(se){if(!("touches"in se&&se.touches.length>0)){if(b){(E||F)&&R&&B&&x?.(R);const{inProgress:_e,...fe}=U,Ce={...fe,toPosition:U.toHandle?U.toPosition:null};_?.(se,Ce),s&&N?.(se,Ce)}y(),cancelAnimationFrame(X),O=!1,B=!1,R=null,F=null,V.removeEventListener("mousemove",le),V.removeEventListener("mouseup",ve),V.removeEventListener("touchmove",le),V.removeEventListener("touchend",ve)}}V.addEventListener("mousemove",le),V.addEventListener("mouseup",ve),V.addEventListener("touchmove",le),V.addEventListener("touchend",ve)}function Mr(t,{handle:e,connectionMode:n,fromNodeId:o,fromHandleId:r,fromType:s,doc:i,lib:a,flowId:f,isValidConnection:u=Cr,nodeLookup:c}){const h=s==="target",d=e?i.querySelector(`.${a}-flow__handle[data-id="${f}-${e?.nodeId}-${e?.id}-${e?.type}"]`):null,{x:y,y:v}=Ie(t),x=i.elementFromPoint(y,v),_=x?.classList.contains(`${a}-flow__handle`)?x:d,P={handleDomNode:_,isValid:!1,connection:null,toHandle:null};if(_){const N=Nr(void 0,_),T=_.getAttribute("data-nodeid"),S=_.getAttribute("data-handleid"),H=_.classList.contains("connectable"),I=_.classList.contains("connectableend");if(!T||!N)return P;const K={source:h?T:o,sourceHandle:h?S:r,target:h?o:T,targetHandle:h?r:S};P.connection=K;const V=H&&I&&(n===mt.Strict?h&&N==="source"||!h&&N==="target":T!==o||S!==r);P.isValid=V&&u(K),P.toHandle=Pr(T,N,S,c,n,!0)}return P}const Oo={onPointerDown:vl,isValid:Mr},fn=t=>({x:t.x,y:t.y,zoom:t.k}),_n=({x:t,y:e,zoom:n})=>ln.translate(t,e).scale(n),ut=(t,e)=>t.target.closest(`.${e}`),Dr=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),pl=t=>((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2,kn=(t,e=0,n=pl,o=()=>{})=>{const r=typeof e=="number"&&e>0;return r||o(),r?t.transition().duration(e).ease(n).on("end",o):t},Ir=t=>{const e=t.ctrlKey&&nn()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e};function xl({zoomPanValues:t,noWheelClassName:e,d3Selection:n,d3Zoom:o,panOnScrollMode:r,panOnScrollSpeed:s,zoomOnPinch:i,onPanZoomStart:a,onPanZoom:f,onPanZoomEnd:u}){return c=>{if(ut(c,e))return c.ctrlKey&&c.preventDefault(),!1;c.preventDefault(),c.stopImmediatePropagation();const h=n.property("__zoom").k||1;if(c.ctrlKey&&i){const _=Re(c),P=Ir(c),N=h*Math.pow(2,P);o.scaleTo(n,N,_,c);return}const d=c.deltaMode===1?20:1;let y=r===gt.Vertical?0:c.deltaX*d,v=r===gt.Horizontal?0:c.deltaY*d;!nn()&&c.shiftKey&&r!==gt.Vertical&&(y=c.deltaY*d,v=0),o.translateBy(n,-(y/h)*s,-(v/h)*s,{internal:!0});const x=fn(n.property("__zoom"));clearTimeout(t.panScrollTimeout),t.isPanScrolling?(f?.(c,x),t.panScrollTimeout=setTimeout(()=>{u?.(c,x),t.isPanScrolling=!1},150)):(t.isPanScrolling=!0,a?.(c,x))}}function wl({noWheelClassName:t,preventScrolling:e,d3ZoomHandler:n}){return function(o,r){const s=o.type==="wheel",i=!e&&s&&!o.ctrlKey,a=ut(o,t);if(o.ctrlKey&&s&&a&&o.preventDefault(),i||a)return null;o.preventDefault(),n.call(this,o,r)}}function bl({zoomPanValues:t,onDraggingChange:e,onPanZoomStart:n}){return o=>{if(o.sourceEvent?.internal)return;const r=fn(o.transform);t.mouseButton=o.sourceEvent?.button||0,t.isZoomingOrPanning=!0,t.prevViewport=r,o.sourceEvent?.type==="mousedown"&&e(!0),n&&n?.(o.sourceEvent,r)}}function _l({zoomPanValues:t,panOnDrag:e,onPaneContextMenu:n,onTransformChange:o,onPanZoom:r}){return s=>{t.usedRightMouseButton=!!(n&&Dr(e,t.mouseButton??0)),s.sourceEvent?.sync||o([s.transform.x,s.transform.y,s.transform.k]),r&&!s.sourceEvent?.internal&&r?.(s.sourceEvent,fn(s.transform))}}function kl({zoomPanValues:t,panOnDrag:e,panOnScroll:n,onDraggingChange:o,onPanZoomEnd:r,onPaneContextMenu:s}){return i=>{if(!i.sourceEvent?.internal&&(t.isZoomingOrPanning=!1,s&&Dr(e,t.mouseButton??0)&&!t.usedRightMouseButton&&i.sourceEvent&&s(i.sourceEvent),t.usedRightMouseButton=!1,o(!1),r)){const a=fn(i.transform);t.prevViewport=a,clearTimeout(t.timerId),t.timerId=setTimeout(()=>{r?.(i.sourceEvent,a)},n?150:0)}}}function Sl({zoomActivationKeyPressed:t,zoomOnScroll:e,zoomOnPinch:n,panOnDrag:o,panOnScroll:r,zoomOnDoubleClick:s,userSelectionActive:i,noWheelClassName:a,noPanClassName:f,lib:u,connectionInProgress:c}){return h=>{const d=t||e,y=n&&h.ctrlKey,v=h.type==="wheel";if(h.button===1&&h.type==="mousedown"&&(ut(h,`${u}-flow__node`)||ut(h,`${u}-flow__edge`)))return!0;if(!o&&!d&&!r&&!s&&!n||i||c&&!v||ut(h,a)&&v||ut(h,f)&&(!v||r&&v&&!t)||!n&&h.ctrlKey&&v)return!1;if(!n&&h.type==="touchstart"&&h.touches?.length>1)return h.preventDefault(),!1;if(!d&&!r&&!y&&v||!o&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(o)&&!o.includes(h.button)&&h.type==="mousedown")return!1;const x=Array.isArray(o)&&o.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||v)&&x}}function El({domNode:t,minZoom:e,maxZoom:n,translateExtent:o,viewport:r,onPanZoom:s,onPanZoomStart:i,onPanZoomEnd:a,onDraggingChange:f}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},c=t.getBoundingClientRect(),h=Sa().scaleExtent([e,n]).translateExtent(o),d=Me(t).call(h);N({x:r.x,y:r.y,zoom:yt(r.zoom,e,n)},[[0,0],[c.width,c.height]],o);const y=d.on("wheel.zoom"),v=d.on("dblclick.zoom");h.wheelDelta(Ir);function x(E,p){return d?new Promise(k=>{h?.interpolate(p?.interpolate==="linear"?Et:Yt).transform(kn(d,p?.duration,p?.ease,()=>k(!0)),E)}):Promise.resolve(!1)}function _({noWheelClassName:E,noPanClassName:p,onPaneContextMenu:k,userSelectionActive:g,panOnScroll:w,panOnDrag:b,panOnScrollMode:C,panOnScrollSpeed:D,preventScrolling:O,zoomOnPinch:R,zoomOnScroll:B,zoomOnDoubleClick:F,zoomActivationKeyPressed:W,lib:Z,onTransformChange:re,connectionInProgress:ee,paneClickDistance:U,selectionOnDrag:te}){g&&!u.isZoomingOrPanning&&P();const le=w&&!W&&!g;h.clickDistance(te?1/0:!Fe(U)||U<0?0:U);const ve=le?xl({zoomPanValues:u,noWheelClassName:E,d3Selection:d,d3Zoom:h,panOnScrollMode:C,panOnScrollSpeed:D,zoomOnPinch:R,onPanZoomStart:i,onPanZoom:s,onPanZoomEnd:a}):wl({noWheelClassName:E,preventScrolling:O,d3ZoomHandler:y});if(d.on("wheel.zoom",ve,{passive:!1}),!g){const _e=bl({zoomPanValues:u,onDraggingChange:f,onPanZoomStart:i});h.on("start",_e);const fe=_l({zoomPanValues:u,panOnDrag:b,onPaneContextMenu:!!k,onPanZoom:s,onTransformChange:re});h.on("zoom",fe);const Ce=kl({zoomPanValues:u,panOnDrag:b,panOnScroll:w,onPaneContextMenu:k,onPanZoomEnd:a,onDraggingChange:f});h.on("end",Ce)}const se=Sl({zoomActivationKeyPressed:W,panOnDrag:b,zoomOnScroll:B,panOnScroll:w,zoomOnDoubleClick:F,zoomOnPinch:R,userSelectionActive:g,noPanClassName:p,noWheelClassName:E,lib:Z,connectionInProgress:ee});h.filter(se),F?d.on("dblclick.zoom",v):d.on("dblclick.zoom",null)}function P(){h.on("zoom",null)}async function N(E,p,k){const g=_n(E),w=h?.constrain()(g,p,k);return w&&await x(w),new Promise(b=>b(w))}async function T(E,p){const k=_n(E);return await x(k,p),new Promise(g=>g(k))}function S(E){if(d){const p=_n(E),k=d.property("__zoom");(k.k!==E.zoom||k.x!==E.x||k.y!==E.y)&&h?.transform(d,p,null,{sync:!0})}}function H(){const E=d?dr(d.node()):{x:0,y:0,k:1};return{x:E.x,y:E.y,zoom:E.k}}function I(E,p){return d?new Promise(k=>{h?.interpolate(p?.interpolate==="linear"?Et:Yt).scaleTo(kn(d,p?.duration,p?.ease,()=>k(!0)),E)}):Promise.resolve(!1)}function K(E,p){return d?new Promise(k=>{h?.interpolate(p?.interpolate==="linear"?Et:Yt).scaleBy(kn(d,p?.duration,p?.ease,()=>k(!0)),E)}):Promise.resolve(!1)}function M(E){h?.scaleExtent(E)}function V(E){h?.translateExtent(E)}function X(E){const p=!Fe(E)||E<0?0:E;h?.clickDistance(p)}return{update:_,destroy:P,setViewport:T,setViewportConstrained:N,getViewport:H,scaleTo:I,scaleBy:K,setScaleExtent:M,setTranslateExtent:V,syncViewport:S,setClickDistance:X}}var Ho;(function(t){t.Line="line",t.Handle="handle"})(Ho||(Ho={}));function to(){const t={};return[e=>{if(e&&!Yr(t))throw new Error(e);return Rn(t)},e=>Xo(t,e)]}const[Pl,Nl]=to(),[Cl,Ml]=to(),[Dl,Il]=to();var zl=G("<div><!></div>");function ge(t,e){J(e,!0);let n=L(e,"id",3,null),o=L(e,"type",3,"source"),r=L(e,"position",19,()=>Y.Top),s=L(e,"isConnectableStart",3,!0),i=L(e,"isConnectableEnd",3,!0),a=Se(e,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const f=Pl("Handle must be used within a Custom Node component"),u=Cl("Handle must be used within a Custom Node component");let c=m(()=>o()==="target"),h=m(()=>e.isConnectable!==void 0?e.isConnectable:u.value),d=wt(),y=m(()=>d.ariaLabelConfig),v=null;Xr(()=>{if(e.onconnect||e.ondisconnect){d.edges;let p=d.connectionLookup.get(`${f}-${o()}${n()?`-${n()}`:""}`);if(v&&!Pa(p,v)){const k=p??new Map;ko(v,k,e.ondisconnect),ko(k,v,e.onconnect)}v=new Map(p)}});let x=m(()=>{if(!d.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:p,toHandle:k,isValid:g}=d.connection,w=p&&p.nodeId===f&&p.type===o()&&p.id===n(),b=k&&k.nodeId===f&&k.type===o()&&k.id===n(),C=d.connectionMode===mt.Strict?p?.type!==o():f!==p?.nodeId||n()!==p?.id;return[!0,w,b,C,b&&g]}),_=m(()=>zt(l(x),5)),P=m(()=>l(_)[0]),N=m(()=>l(_)[1]),T=m(()=>l(_)[2]),S=m(()=>l(_)[3]),H=m(()=>l(_)[4]);function I(p){const k=d.onbeforeconnect?d.onbeforeconnect(p):p;k&&(d.addEdge(k),d.onconnect?.(p))}function K(p){const k=xr(p);p.currentTarget&&(k&&p.button===0||!k)&&Oo.onPointerDown(p,{handleId:n(),nodeId:f,isTarget:l(c),connectionRadius:d.connectionRadius,domNode:d.domNode,nodeLookup:d.nodeLookup,connectionMode:d.connectionMode,lib:"svelte",autoPanOnConnect:d.autoPanOnConnect,autoPanSpeed:d.autoPanSpeed,flowId:d.flowId,isValidConnection:e.isValidConnection??d.isValidConnection,updateConnection:d.updateConnection,cancelConnection:d.cancelConnection,panBy:d.panBy,onConnect:I,onConnectStart:(g,w)=>{d.onconnectstart?.(g,{nodeId:w.nodeId,handleId:w.handleId,handleType:w.handleType})},onConnectEnd:(g,w)=>{d.onconnectend?.(g,w)},getTransform:()=>[d.viewport.x,d.viewport.y,d.viewport.zoom],getFromHandle:()=>d.connection.fromHandle,dragThreshold:d.connectionDragThreshold,handleDomNode:p.currentTarget})}function M(p){if(!f||!d.clickConnectStartHandle&&!s())return;if(!d.clickConnectStartHandle){d.onclickconnectstart?.(p,{nodeId:f,handleId:n(),handleType:o()}),d.clickConnectStartHandle={nodeId:f,type:o(),id:n()};return}const k=vr(p.target),g=e.isValidConnection??d.isValidConnection,{connectionMode:w,clickConnectStartHandle:b,flowId:C,nodeLookup:D}=d,{connection:O,isValid:R}=Oo.isValid(p,{handle:{nodeId:f,id:n(),type:o()},connectionMode:w,fromNodeId:b.nodeId,fromHandleId:b.id??null,fromType:b.type,isValidConnection:g,flowId:C,doc:k,lib:"svelte",nodeLookup:D});R&&O&&I(O);const B=structuredClone(Go(d.connection));delete B.inProgress,B.toPosition=B.toHandle?B.toHandle.position:null,d.onclickconnectend?.(p,B),d.clickConnectStartHandle=null}var V=zl(),X=()=>{};Ee(V,()=>({"data-handleid":n(),"data-nodeid":f,"data-handlepos":r(),"data-id":`${d.flowId??""}-${f??""}-${n()??"null"??""}-${o()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${r()}`,d.noDragClass,d.noPanClass,r(),e.class],onmousedown:K,ontouchstart:K,onclick:d.clickConnect?M:void 0,onkeypress:X,style:e.style,role:"button","aria-label":l(y)["handle.ariaLabel"],tabindex:"-1",...a,[Kn]:{valid:l(H),connectingto:l(T),connectingfrom:l(N),source:!l(c),target:l(c),connectablestart:s(),connectableend:i(),connectable:l(h),connectionindicator:l(h)&&(!l(P)||l(S))&&(l(P)||d.clickConnectStartHandle?i():s())}}));var E=Q(V);ye(E,()=>e.children??ke),q(V),z(t,V),$()}var Tl=G("<!> <!>",1);function zr(t,e){J(e,!0);let n=L(e,"targetPosition",19,()=>Y.Top),o=L(e,"sourcePosition",19,()=>Y.Bottom);var r=Tl(),s=ne(r);ge(s,{type:"target",get position(){return n()}});var i=j(s),a=j(i);ge(a,{type:"source",get position(){return o()}}),ie(()=>we(i,` ${e.data?.label??""} `)),z(t,r),$()}var Al=G(" <!>",1);function Ol(t,e){J(e,!0);let n=L(e,"data",19,()=>({label:"Node"})),o=L(e,"sourcePosition",19,()=>Y.Bottom);$e();var r=Al(),s=ne(r),i=j(s);ge(i,{type:"source",get position(){return o()}}),ie(()=>we(s,`${n()?.label??""} `)),z(t,r),$()}var Hl=G(" <!>",1);function Rl(t,e){J(e,!0);let n=L(e,"data",19,()=>({label:"Node"})),o=L(e,"targetPosition",19,()=>Y.Top);$e();var r=Hl(),s=ne(r),i=j(s);ge(i,{type:"target",get position(){return o()}}),ie(()=>we(s,`${n()?.label??""} `)),z(t,r),$()}function Vl(t,e){}function Sn(t,e,n){if(!n||!e)return;const o=n==="root"?e:e.querySelector(`.svelte-flow__${n}`);o&&o.appendChild(t)}function Ll(t,e){const n=m(wt),o=m(()=>l(n).domNode);let r;return l(o)?Sn(t,l(o),e):r=Fo(()=>{et(()=>{Sn(t,l(o),e),r?.()})}),{async update(s){Sn(t,l(o),s)},destroy(){t.parentNode&&t.parentNode.removeChild(t),r?.()}}}function Kl(){let t=ce(typeof window>"u");if(l(t)){const e=Fo(()=>{et(()=>{A(t,!1),e?.()})})}return{get value(){return l(t)}}}const Ro=t=>Ca(t),Bl=t=>fr(t);function Ke(t){return t===void 0?void 0:`${t}px`}const on={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Zl=G("<div><!></div>");function Yl(t,e){J(e,!0);let n=L(e,"x",3,0),o=L(e,"y",3,0),r=L(e,"selectEdgeOnClick",3,!1),s=L(e,"transparent",3,!1),i=Se(e,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=wt(),f=Dl("EdgeLabel must be used within a Custom Edge component");let u=m(()=>a.visible.edges.get(f)?.zIndex);var c=Zl(),h=()=>{r()&&f&&a.handleEdgeSelection(f)};Ee(c,y=>({class:["svelte-flow__edge-label",{transparent:s()},e.class],tabindex:"-1",onclick:h,...i,[Bn]:y}),[()=>({display:Kl().value?"none":void 0,cursor:r()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${o()??""}px)`,"pointer-events":"all",width:Ke(e.width),height:Ke(e.height),"z-index":l(u)})],void 0,void 0,"svelte-1wg91mu");var d=Q(c);ye(d,()=>e.children??ke),q(c),xe(c,(y,v)=>Ll?.(y,v),()=>"edge-labels"),z(t,c),$()}var Xl=Ne("<path></path>"),Fl=Ne('<path fill="none"></path><!><!>',1);function hn(t,e){let n=L(e,"interactionWidth",3,20),o=Se(e,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var r=Fl(),s=ne(r),i=j(s);{var a=c=>{var h=Xl();Ee(h,()=>({d:e.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...o})),z(c,h)};ue(i,c=>{n()>0&&c(a)})}var f=j(i);{var u=c=>{Yl(c,{get x(){return e.labelX},get y(){return e.labelY},get style(){return e.labelStyle},selectEdgeOnClick:!0,children:(h,d)=>{$e();var y=En();ie(()=>we(y,e.label)),z(h,y)},$$slots:{default:!0}})};ue(f,c=>{e.label&&c(u)})}ie(()=>{oe(s,"id",e.id),oe(s,"d",e.path),Ue(s,0,it(["svelte-flow__edge-path",e.class])),oe(s,"marker-start",e.markerStart),oe(s,"marker-end",e.markerEnd),ze(s,e.style)}),z(t,r)}function Tr(t,e){J(e,!0);let n=m(()=>wr({sourceX:e.sourceX,sourceY:e.sourceY,targetX:e.targetX,targetY:e.targetY,sourcePosition:e.sourcePosition,targetPosition:e.targetPosition,curvature:e.pathOptions?.curvature})),o=m(()=>zt(l(n),3)),r=m(()=>l(o)[0]),s=m(()=>l(o)[1]),i=m(()=>l(o)[2]);hn(t,{get id(){return e.id},get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return e.label},get labelStyle(){return e.labelStyle},get markerStart(){return e.markerStart},get markerEnd(){return e.markerEnd},get interactionWidth(){return e.interactionWidth},get style(){return e.style}}),$()}function Wl(t,e){J(e,!0);let n=m(()=>jn({sourceX:e.sourceX,sourceY:e.sourceY,targetX:e.targetX,targetY:e.targetY,sourcePosition:e.sourcePosition,targetPosition:e.targetPosition})),o=m(()=>zt(l(n),3)),r=m(()=>l(o)[0]),s=m(()=>l(o)[1]),i=m(()=>l(o)[2]);hn(t,{get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return e.label},get labelStyle(){return e.labelStyle},get markerStart(){return e.markerStart},get markerEnd(){return e.markerEnd},get interactionWidth(){return e.interactionWidth},get style(){return e.style}}),$()}function ql(t,e){J(e,!0);let n=m(()=>_r({sourceX:e.sourceX,sourceY:e.sourceY,targetX:e.targetX,targetY:e.targetY})),o=m(()=>zt(l(n),3)),r=m(()=>l(o)[0]),s=m(()=>l(o)[1]),i=m(()=>l(o)[2]);hn(t,{get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return e.label},get labelStyle(){return e.labelStyle},get markerStart(){return e.markerStart},get markerEnd(){return e.markerEnd},get interactionWidth(){return e.interactionWidth},get style(){return e.style}}),$()}function Gl(t,e){J(e,!0);let n=m(()=>jn({sourceX:e.sourceX,sourceY:e.sourceY,targetX:e.targetX,targetY:e.targetY,sourcePosition:e.sourcePosition,targetPosition:e.targetPosition,borderRadius:0})),o=m(()=>zt(l(n),3)),r=m(()=>l(o)[0]),s=m(()=>l(o)[1]),i=m(()=>l(o)[2]);hn(t,{get path(){return l(r)},get labelX(){return l(s)},get labelY(){return l(i)},get label(){return e.label},get labelStyle(){return e.labelStyle},get markerStart(){return e.markerStart},get markerEnd(){return e.markerEnd},get interactionWidth(){return e.interactionWidth},get style(){return e.style}}),$()}function Ul(t,e,n,o){const r=new Map;return Gn(t,{x:0,y:0,width:n,height:o},e,!0).forEach(s=>{r.set(s.id,s)}),r}function Vo(t){const{edges:e,defaultEdgeOptions:n,nodeLookup:o,previousEdges:r,connectionMode:s,onerror:i,onlyRenderVisible:a,elevateEdgesOnSelect:f,zIndexMode:u}=t,c=new Map;for(const h of e){const d=o.get(h.source),y=o.get(h.target);if(!d||!y)continue;if(a){const{visibleNodes:_,transform:P,width:N,height:T}=t;if(Xa({sourceNode:d,targetNode:y,width:N,height:T,transform:P}))_.set(d.id,d),_.set(y.id,y);else continue}const v=r.get(h.id);if(v&&h===v.edge&&d==v.sourceNode&&y==v.targetNode){c.set(h.id,v);continue}const x=Qa({id:h.id,sourceNode:d,targetNode:y,sourceHandle:h.sourceHandle||null,targetHandle:h.targetHandle||null,connectionMode:s,onError:i});x&&c.set(h.id,{...n,...h,...x,zIndex:Ya({selected:h.selected,zIndex:h.zIndex??n.zIndex,sourceNode:d,targetNode:y,elevateOnSelect:f,zIndexMode:u}),sourceNode:d,targetNode:y,edge:h})}return c}const Ar={input:Ol,output:Rl,default:zr,group:Vl},Or={straight:ql,smoothstep:Wl,default:Tr,step:Gl};function jl(t,e,n,o,r,s){if(e&&!n&&o&&r){const i=cn(s,{filter:a=>!!((a.width||a.initialWidth)&&(a.height||a.initialHeight))});return Un(i,o,r,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function Ql(t){class e{#e=m(()=>t.props.id??"1");get flowId(){return l(this.#e)}set flowId(o){A(this.#e,o)}#t=ce(null);get domNode(){return l(this.#t)}set domNode(o){A(this.#t,o)}#n=ce(null);get panZoom(){return l(this.#n)}set panZoom(o){A(this.#n,o)}#o=ce(t.width??0);get width(){return l(this.#o)}set width(o){A(this.#o,o)}#r=ce(t.height??0);get height(){return l(this.#r)}set height(o){A(this.#r,o)}#i=ce(t.props.zIndexMode??"basic");get zIndexMode(){return l(this.#i)}set zIndexMode(o){A(this.#i,o)}#s=m(()=>{const o=ol(t.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:t.props.elevateNodesOnSelect??!0,checkEquality:!0,zIndexMode:this.zIndexMode});return this.fitViewQueued&&o&&(this.fitViewOptions?.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),o});get nodesInitialized(){return l(this.#s)}set nodesInitialized(o){A(this.#s,o)}#a=m(()=>this.panZoom!==null);get viewportInitialized(){return l(this.#a)}set viewportInitialized(o){A(this.#a,o)}#l=m(()=>(cl(this.connectionLookup,this.edgeLookup,t.edges),t.edges));get _edges(){return l(this.#l)}set _edges(o){A(this.#l,o)}get nodes(){return this.nodesInitialized,t.nodes}set nodes(o){t.nodes=o}get edges(){return this._edges}set edges(o){t.edges=o}_prevSelectedNodes=[];_prevSelectedNodeIds=new Set;#c=m(()=>{const o=this._prevSelectedNodeIds.size,r=new Set,s=this.nodes.filter(i=>(i.selected&&(r.add(i.id),this._prevSelectedNodeIds.delete(i.id)),i.selected));return(o!==r.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=s),this._prevSelectedNodeIds=r,this._prevSelectedNodes});get selectedNodes(){return l(this.#c)}set selectedNodes(o){A(this.#c,o)}_prevSelectedEdges=[];_prevSelectedEdgeIds=new Set;#d=m(()=>{const o=this._prevSelectedEdgeIds.size,r=new Set,s=this.edges.filter(i=>(i.selected&&(r.add(i.id),this._prevSelectedEdgeIds.delete(i.id)),i.selected));return(o!==r.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=s),this._prevSelectedEdgeIds=r,this._prevSelectedEdges});get selectedEdges(){return l(this.#d)}set selectedEdges(o){A(this.#d,o)}selectionChangeHandlers=new Map;nodeLookup=new Map;parentLookup=new Map;connectionLookup=new Map;edgeLookup=new Map;_prevVisibleEdges=new Map;#u=m(()=>{const{nodes:o,_edges:r,_prevVisibleEdges:s,nodeLookup:i,connectionMode:a,onerror:f,onlyRenderVisibleElements:u,defaultEdgeOptions:c,zIndexMode:h}=this;let d,y;const v={edges:r,defaultEdgeOptions:c,previousEdges:s,nodeLookup:i,connectionMode:a,elevateEdgesOnSelect:t.props.elevateEdgesOnSelect??!0,zIndexMode:h,onerror:f};if(u){const{viewport:x,width:_,height:P}=this,N=[x.x,x.y,x.zoom];d=Ul(i,N,_,P),y=Vo({...v,onlyRenderVisible:!0,visibleNodes:d,transform:N,width:_,height:P})}else d=this.nodeLookup,y=Vo(v);return{nodes:d,edges:y}});get visible(){return l(this.#u)}set visible(o){A(this.#u,o)}#f=m(()=>t.props.nodesDraggable??!0);get nodesDraggable(){return l(this.#f)}set nodesDraggable(o){A(this.#f,o)}#h=m(()=>t.props.nodesConnectable??!0);get nodesConnectable(){return l(this.#h)}set nodesConnectable(o){A(this.#h,o)}#g=m(()=>t.props.elementsSelectable??!0);get elementsSelectable(){return l(this.#g)}set elementsSelectable(o){A(this.#g,o)}#m=m(()=>t.props.nodesFocusable??!0);get nodesFocusable(){return l(this.#m)}set nodesFocusable(o){A(this.#m,o)}#y=m(()=>t.props.edgesFocusable??!0);get edgesFocusable(){return l(this.#y)}set edgesFocusable(o){A(this.#y,o)}#v=m(()=>t.props.disableKeyboardA11y??!1);get disableKeyboardA11y(){return l(this.#v)}set disableKeyboardA11y(o){A(this.#v,o)}#p=m(()=>t.props.minZoom??.5);get minZoom(){return l(this.#p)}set minZoom(o){A(this.#p,o)}#x=m(()=>t.props.maxZoom??2);get maxZoom(){return l(this.#x)}set maxZoom(o){A(this.#x,o)}#w=m(()=>t.props.nodeOrigin??[0,0]);get nodeOrigin(){return l(this.#w)}set nodeOrigin(o){A(this.#w,o)}#b=m(()=>t.props.nodeExtent??zn);get nodeExtent(){return l(this.#b)}set nodeExtent(o){A(this.#b,o)}#_=m(()=>t.props.translateExtent??zn);get translateExtent(){return l(this.#_)}set translateExtent(o){A(this.#_,o)}#k=m(()=>t.props.defaultEdgeOptions??{});get defaultEdgeOptions(){return l(this.#k)}set defaultEdgeOptions(o){A(this.#k,o)}#S=m(()=>t.props.nodeDragThreshold??1);get nodeDragThreshold(){return l(this.#S)}set nodeDragThreshold(o){A(this.#S,o)}#E=m(()=>t.props.autoPanOnNodeDrag??!0);get autoPanOnNodeDrag(){return l(this.#E)}set autoPanOnNodeDrag(o){A(this.#E,o)}#P=m(()=>t.props.autoPanOnConnect??!0);get autoPanOnConnect(){return l(this.#P)}set autoPanOnConnect(o){A(this.#P,o)}#N=m(()=>t.props.autoPanOnNodeFocus??!0);get autoPanOnNodeFocus(){return l(this.#N)}set autoPanOnNodeFocus(o){A(this.#N,o)}#C=m(()=>t.props.autoPanSpeed??15);get autoPanSpeed(){return l(this.#C)}set autoPanSpeed(o){A(this.#C,o)}#M=m(()=>t.props.connectionDragThreshold??1);get connectionDragThreshold(){return l(this.#M)}set connectionDragThreshold(o){A(this.#M,o)}fitViewQueued=t.props.fitView??!1;fitViewOptions=t.props.fitViewOptions;fitViewResolver=null;#D=m(()=>t.props.snapGrid??null);get snapGrid(){return l(this.#D)}set snapGrid(o){A(this.#D,o)}#I=ce(!1);get dragging(){return l(this.#I)}set dragging(o){A(this.#I,o)}#z=ce(null);get selectionRect(){return l(this.#z)}set selectionRect(o){A(this.#z,o)}#T=ce(!1);get selectionKeyPressed(){return l(this.#T)}set selectionKeyPressed(o){A(this.#T,o)}#A=ce(!1);get multiselectionKeyPressed(){return l(this.#A)}set multiselectionKeyPressed(o){A(this.#A,o)}#O=ce(!1);get deleteKeyPressed(){return l(this.#O)}set deleteKeyPressed(o){A(this.#O,o)}#H=ce(!1);get panActivationKeyPressed(){return l(this.#H)}set panActivationKeyPressed(o){A(this.#H,o)}#R=ce(!1);get zoomActivationKeyPressed(){return l(this.#R)}set zoomActivationKeyPressed(o){A(this.#R,o)}#V=ce(null);get selectionRectMode(){return l(this.#V)}set selectionRectMode(o){A(this.#V,o)}#L=ce("");get ariaLiveMessage(){return l(this.#L)}set ariaLiveMessage(o){A(this.#L,o)}#K=m(()=>t.props.selectionMode??Jt.Partial);get selectionMode(){return l(this.#K)}set selectionMode(o){A(this.#K,o)}#B=m(()=>({...Ar,...t.props.nodeTypes}));get nodeTypes(){return l(this.#B)}set nodeTypes(o){A(this.#B,o)}#Z=m(()=>({...Or,...t.props.edgeTypes}));get edgeTypes(){return l(this.#Z)}set edgeTypes(o){A(this.#Z,o)}#Y=m(()=>t.props.noPanClass??"nopan");get noPanClass(){return l(this.#Y)}set noPanClass(o){A(this.#Y,o)}#X=m(()=>t.props.noDragClass??"nodrag");get noDragClass(){return l(this.#X)}set noDragClass(o){A(this.#X,o)}#F=m(()=>t.props.noWheelClass??"nowheel");get noWheelClass(){return l(this.#F)}set noWheelClass(o){A(this.#F,o)}#W=m(()=>Ka(t.props.ariaLabelConfig));get ariaLabelConfig(){return l(this.#W)}set ariaLabelConfig(o){A(this.#W,o)}#q=ce(jl(this.nodesInitialized,t.props.fitView,t.props.initialViewport,this.width,this.height,this.nodeLookup));get _viewport(){return l(this.#q)}set _viewport(o){A(this.#q,o)}get viewport(){return t.viewport??this._viewport}set viewport(o){t.viewport&&(t.viewport=o),this._viewport=o}#G=ce(Tn);get _connection(){return l(this.#G)}set _connection(o){A(this.#G,o)}#U=m(()=>this._connection.inProgress?{...this._connection,to:Ht(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection);get connection(){return l(this.#U)}set connection(o){A(this.#U,o)}#j=m(()=>t.props.connectionMode??mt.Strict);get connectionMode(){return l(this.#j)}set connectionMode(o){A(this.#j,o)}#Q=m(()=>t.props.connectionRadius??20);get connectionRadius(){return l(this.#Q)}set connectionRadius(o){A(this.#Q,o)}#J=m(()=>t.props.isValidConnection??(()=>!0));get isValidConnection(){return l(this.#J)}set isValidConnection(o){A(this.#J,o)}#$=m(()=>t.props.selectNodesOnDrag??!0);get selectNodesOnDrag(){return l(this.#$)}set selectNodesOnDrag(o){A(this.#$,o)}#ee=m(()=>t.props.defaultMarkerColor===void 0?"#b1b1b7":t.props.defaultMarkerColor);get defaultMarkerColor(){return l(this.#ee)}set defaultMarkerColor(o){A(this.#ee,o)}#te=m(()=>Ja(t.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd}));get markers(){return l(this.#te)}set markers(o){A(this.#te,o)}#ne=m(()=>t.props.onlyRenderVisibleElements??!1);get onlyRenderVisibleElements(){return l(this.#ne)}set onlyRenderVisibleElements(o){A(this.#ne,o)}#oe=m(()=>t.props.onflowerror??Oa);get onerror(){return l(this.#oe)}set onerror(o){A(this.#oe,o)}#re=m(()=>t.props.ondelete);get ondelete(){return l(this.#re)}set ondelete(o){A(this.#re,o)}#ie=m(()=>t.props.onbeforedelete);get onbeforedelete(){return l(this.#ie)}set onbeforedelete(o){A(this.#ie,o)}#se=m(()=>t.props.onbeforeconnect);get onbeforeconnect(){return l(this.#se)}set onbeforeconnect(o){A(this.#se,o)}#ae=m(()=>t.props.onconnect);get onconnect(){return l(this.#ae)}set onconnect(o){A(this.#ae,o)}#le=m(()=>t.props.onconnectstart);get onconnectstart(){return l(this.#le)}set onconnectstart(o){A(this.#le,o)}#ce=m(()=>t.props.onconnectend);get onconnectend(){return l(this.#ce)}set onconnectend(o){A(this.#ce,o)}#de=m(()=>t.props.onbeforereconnect);get onbeforereconnect(){return l(this.#de)}set onbeforereconnect(o){A(this.#de,o)}#ue=m(()=>t.props.onreconnect);get onreconnect(){return l(this.#ue)}set onreconnect(o){A(this.#ue,o)}#fe=m(()=>t.props.onreconnectstart);get onreconnectstart(){return l(this.#fe)}set onreconnectstart(o){A(this.#fe,o)}#he=m(()=>t.props.onreconnectend);get onreconnectend(){return l(this.#he)}set onreconnectend(o){A(this.#he,o)}#ge=m(()=>t.props.clickConnect??!0);get clickConnect(){return l(this.#ge)}set clickConnect(o){A(this.#ge,o)}#me=m(()=>t.props.onclickconnectstart);get onclickconnectstart(){return l(this.#me)}set onclickconnectstart(o){A(this.#me,o)}#ye=m(()=>t.props.onclickconnectend);get onclickconnectend(){return l(this.#ye)}set onclickconnectend(o){A(this.#ye,o)}#ve=ce(null);get clickConnectStartHandle(){return l(this.#ve)}set clickConnectStartHandle(o){A(this.#ve,o)}#pe=m(()=>t.props.onselectiondrag);get onselectiondrag(){return l(this.#pe)}set onselectiondrag(o){A(this.#pe,o)}#xe=m(()=>t.props.onselectiondragstart);get onselectiondragstart(){return l(this.#xe)}set onselectiondragstart(o){A(this.#xe,o)}#we=m(()=>t.props.onselectiondragstop);get onselectiondragstop(){return l(this.#we)}set onselectiondragstop(o){A(this.#we,o)}resolveFitView=async()=>{this.panZoom&&(await za({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),this.fitViewResolver?.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)};_prefersDark=new Ur("(prefers-color-scheme: dark)",t.props.colorModeSSR==="dark");#be=m(()=>t.props.colorMode==="system"?this._prefersDark.current?"dark":"light":t.props.colorMode??"light");get colorMode(){return l(this.#be)}set colorMode(o){A(this.#be,o)}constructor(){}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=Tn,this.clickConnectStartHandle=null,this.viewport=t.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return new e}function wt(){const t=Rn(Hn);if(!t)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return t.getStore()}const Hn=Symbol();function Jl(t){const e=Ql(t);function n(E){e.nodeTypes={...Ar,...E}}function o(E){e.edgeTypes={...Or,...E}}function r(E){e.edges=qa(E,e.edges)}const s=(E,p=!1)=>{e.nodes=e.nodes.map(k=>{if(e.connection.inProgress&&e.connection.fromNode.id===k.id){const w=e.nodeLookup.get(k.id);w&&(e.connection={...e.connection,from:rt(w,e.connection.fromHandle,Y.Left,!0)})}const g=E.get(k.id);return g?{...k,position:g.position,dragging:p}:k})};function i(E){const{changes:p,updatedInternals:k}=al(E,e.nodeLookup,e.parentLookup,e.domNode,e.nodeOrigin,e.nodeExtent,e.zIndexMode);if(!k)return;tl(e.nodeLookup,e.parentLookup,{nodeOrigin:e.nodeOrigin,nodeExtent:e.nodeExtent,zIndexMode:e.zIndexMode}),e.fitViewQueued&&e.resolveFitView();const g=new Map;for(const w of p){const b=e.nodeLookup.get(w.id)?.internals.userNode;if(!b)continue;const C={...b};switch(w.type){case"dimensions":{const D={...C.measured,...w.dimensions};w.setAttributes&&(C.width=w.dimensions?.width??C.width,C.height=w.dimensions?.height??C.height),C.measured=D;break}case"position":C.position=w.position??C.position;break}g.set(w.id,C)}e.nodes=e.nodes.map(w=>g.get(w.id)??w)}function a(E){const p=e.fitViewResolver??Promise.withResolvers();return e.fitViewQueued=!0,e.fitViewOptions=E,e.fitViewResolver=p,e.nodes=[...e.nodes],p.promise}async function f(E,p,k){const g=typeof k?.zoom<"u"?k.zoom:e.maxZoom,w=e.panZoom;return w?(await w.setViewport({x:e.width/2-E*g,y:e.height/2-p*g,zoom:g},{duration:k?.duration,ease:k?.ease,interpolate:k?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function u(E,p){const k=e.panZoom;return k?k.scaleBy(E,p):Promise.resolve(!1)}function c(E){return u(1.2,E)}function h(E){return u(1/1.2,E)}function d(E){const p=e.panZoom;p&&(p.setScaleExtent([E,e.maxZoom]),e.minZoom=E)}function y(E){const p=e.panZoom;p&&(p.setScaleExtent([e.minZoom,E]),e.maxZoom=E)}function v(E){const p=e.panZoom;p&&(p.setTranslateExtent(E),e.translateExtent=E)}function x(E,p=null){let k=!1;const g=E.map(w=>(p?p.has(w.id):!0)&&w.selected?(k=!0,{...w,selected:!1}):w);return[k,g]}function _(E){const p=E?.nodes?new Set(E.nodes.map(D=>D.id)):null,[k,g]=x(e.nodes,p);k&&(e.nodes=g);const w=E?.edges?new Set(E.edges.map(D=>D.id)):null,[b,C]=x(e.edges,w);b&&(e.edges=C)}function P(E){const p=e.multiselectionKeyPressed;e.nodes=e.nodes.map(k=>{const g=E.includes(k.id),w=p&&k.selected||g;return!!k.selected!==w?{...k,selected:w}:k}),p||_({nodes:[]})}function N(E){const p=e.multiselectionKeyPressed;e.edges=e.edges.map(k=>{const g=E.includes(k.id),w=p&&k.selected||g;return!!k.selected!==w?{...k,selected:w}:k}),p||_({edges:[]})}function T(E,p,k){const g=e.nodeLookup.get(E);if(!g){console.warn("012",Dt.error012(E));return}e.selectionRect=null,e.selectionRectMode=null,g.selected?(p||g.selected&&e.multiselectionKeyPressed)&&(_({nodes:[g],edges:[]}),requestAnimationFrame(()=>k?.blur())):P([E])}function S(E){const p=e.edgeLookup.get(E);if(!p){console.warn("012",Dt.error012(E));return}(p.selectable||e.elementsSelectable&&typeof p.selectable>"u")&&(e.selectionRect=null,e.selectionRectMode=null,p.selected?p.selected&&e.multiselectionKeyPressed&&_({nodes:[],edges:[p]}):N([E]))}function H(E,p){const{nodeExtent:k,snapGrid:g,nodeOrigin:w,nodeLookup:b,nodesDraggable:C,onerror:D}=e,O=new Map,R=g?.[0]??5,B=g?.[1]??5,F=E.x*R*p,W=E.y*B*p;for(const Z of b.values()){if(!(Z.selected&&(Z.draggable||C&&typeof Z.draggable>"u")))continue;let ee={x:Z.internals.positionAbsolute.x+F,y:Z.internals.positionAbsolute.y+W};g&&(ee=Ot(ee,g));const{position:U,positionAbsolute:te}=hr({nodeId:Z.id,nextPosition:ee,nodeLookup:b,nodeExtent:k,nodeOrigin:w,onError:D});Z.position=U,Z.internals.positionAbsolute=te,O.set(Z.id,Z)}s(O)}function I(E){return ll({delta:E,panZoom:e.panZoom,transform:[e.viewport.x,e.viewport.y,e.viewport.zoom],translateExtent:e.translateExtent,width:e.width,height:e.height})}const K=E=>{e._connection={...E}};function M(){e._connection=Tn}function V(){e.resetStoreValues(),_()}return Object.assign(e,{setNodeTypes:n,setEdgeTypes:o,addEdge:r,updateNodePositions:s,updateNodeInternals:i,zoomIn:c,zoomOut:h,fitView:a,setCenter:f,setMinZoom:d,setMaxZoom:y,setTranslateExtent:v,unselectNodesAndEdges:_,addSelectedNodes:P,addSelectedEdges:N,handleNodeSelection:T,handleEdgeSelection:S,moveSelectedNodes:H,panBy:I,updateConnection:K,cancelConnection:M,reset:V})}function $l(t,e){const{minZoom:n,maxZoom:o,initialViewport:r,onPanZoomStart:s,onPanZoom:i,onPanZoomEnd:a,translateExtent:f,setPanZoomInstance:u,onDraggingChange:c,onTransformChange:h}=e,d=El({domNode:t,minZoom:n,maxZoom:o,translateExtent:f,viewport:r,onPanZoom:i,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:c}),y=d.getViewport();return(r.x!==y.x||r.y!==y.y||r.zoom!==y.zoom)&&h([y.x,y.y,y.zoom]),u(d),d.update(e),{update(v){d.update(v)}}}var ec=G('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function tc(t,e){J(e,!0);let n=L(e,"store",15),o=m(()=>n().panActivationKeyPressed||e.panOnDrag),r=m(()=>n().panActivationKeyPressed||e.panOnScroll);const{viewport:s}=n();let i=!1;et(()=>{!i&&n().viewportInitialized&&(e.oninit?.(),i=!0)});var a=ec(),f=Q(a);ye(f,()=>e.children),q(a),xe(a,(u,c)=>$l?.(u,c),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:s,onDraggingChange:u=>{n(n().dragging=u,!0)},setPanZoomInstance:u=>{n(n().panZoom=u,!0)},onPanZoomStart:e.onmovestart,onPanZoom:e.onmove,onPanZoomEnd:e.onmoveend,zoomOnScroll:e.zoomOnScroll,zoomOnDoubleClick:e.zoomOnDoubleClick,zoomOnPinch:e.zoomOnPinch,panOnScroll:l(r),panOnDrag:l(o),panOnScrollSpeed:e.panOnScrollSpeed,panOnScrollMode:e.panOnScrollMode,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof e.preventScrolling=="boolean"?e.preventScrolling:!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:e.paneClickDistance,selectionOnDrag:e.selectionOnDrag,onTransformChange:u=>{n(n().viewport={x:u[0],y:u[1],zoom:u[2]},!0)},connectionInProgress:n().connection.inProgress})),z(t,a),$()}function Lo(t,e){return n=>{n.target===e&&t?.(n)}}function Ko(t){return e=>{const n=t.has(e.id);return!!e.selected!==n?{...e,selected:n}:e}}function Bo(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}var nc=G("<div><!></div>");function oc(t,e){J(e,!0);let n=L(e,"store",15),o=L(e,"panOnDrag",3,!0),r=L(e,"paneClickDistance",3,1),s,i=null,a=new Set,f=new Set,u=m(()=>n().panActivationKeyPressed||o()),c=m(()=>n().selectionKeyPressed||!!n().selectionRect||e.selectionOnDrag&&l(u)!==!0),h=m(()=>n().elementsSelectable&&(l(c)||n().selectionRectMode==="user")),d=!1;function y(M){if(i=s?.getBoundingClientRect(),!i)return;const V=M.target===s,X=!V&&!!M.target.closest(".nokey"),E=e.selectionOnDrag&&V||n().selectionKeyPressed;if(X||!l(c)||!E||M.button!==0||!M.isPrimary)return;M.target?.setPointerCapture?.(M.pointerId),d=!1;const{x:p,y:k}=Ie(M,i);n(n().selectionRect={width:0,height:0,startX:p,startY:k,x:p,y:k},!0),V||(M.stopPropagation(),M.preventDefault())}function v(M){if(!l(c)||!i||!n().selectionRect)return;const V=Ie(M,i),{startX:X=0,startY:E=0}=n().selectionRect;if(!d){const b=n().selectionKeyPressed?0:r();if(Math.hypot(V.x-X,V.y-E)<=b)return;n().unselectNodesAndEdges(),e.onselectionstart?.(M)}d=!0;const p={...n().selectionRect,x:V.x<X?V.x:X,y:V.y<E?V.y:E,width:Math.abs(V.x-X),height:Math.abs(V.y-E)},k=a,g=f;a=new Set(Gn(n().nodeLookup,p,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===Jt.Partial,!0).map(b=>b.id));const w=n().defaultEdgeOptions.selectable??!0;f=new Set;for(const b of a){const C=n().connectionLookup.get(b);if(C)for(const{edgeId:D}of C.values()){const O=n().edgeLookup.get(D);O&&(O.selectable??w)&&f.add(D)}}Bo(k,a)||n(n().nodes=n().nodes.map(Ko(a)),!0),Bo(g,f)||n(n().edges=n().edges.map(Ko(f)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=p,!0)}function x(M){M.button===0&&(M.target?.releasePointerCapture?.(M.pointerId),!d&&M.target===s&&N?.(M),n(n().selectionRect=null,!0),d&&n(n().selectionRectMode=a.size>0?"nodes":null,!0),d&&e.onselectionend?.(M))}const _=M=>{if(Array.isArray(l(u))&&l(u).includes(2)){M.preventDefault();return}e.onpanecontextmenu?.({event:M})},P=M=>{d&&(M.stopPropagation(),d=!1)};function N(M){if(d||n().connection.inProgress){d=!1;return}e.onpaneclick?.({event:M}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0),n(n().selectionRect=null,!0)}var T=nc();let S;var H=m(()=>l(h)?void 0:Lo(N,s));T.__click=function(...M){l(H)?.apply(this,M)},T.__pointermove=function(...M){(l(h)?v:void 0)?.apply(this,M)},T.__pointerup=function(...M){(l(h)?x:void 0)?.apply(this,M)};var I=m(()=>Lo(_,s));T.__contextmenu=function(...M){l(I)?.apply(this,M)};var K=Q(T);ye(K,()=>e.children),q(T),Te(T,M=>s=M,()=>s),ie(M=>S=Ue(T,1,"svelte-flow__pane svelte-flow__container",null,S,M),[()=>({draggable:o()===!0||Array.isArray(o())&&o().includes(0),dragging:n().dragging,selection:l(c)})]),qt("pointerdown",T,function(...M){(l(h)?y:void 0)?.apply(this,M)},!0),qt("click",T,function(...M){(l(h)?P:void 0)?.apply(this,M)},!0),z(t,T),$()}Wo(["click","pointermove","pointerup","contextmenu"]);var rc=G('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function ic(t,e){J(e,!0);var n=rc();let o;var r=Q(n);ye(r,()=>e.children),q(n),ie(()=>o=ze(n,"",o,{transform:`translate(${e.store.viewport.x??""}px, ${e.store.viewport.y??""}px) scale(${e.store.viewport.zoom??""})`})),z(t,n),$()}function Hr(t,e){const{store:n,onDrag:o,onDragStart:r,onDragStop:s,onNodeMouseDown:i}=e,a=fl({onDrag:o,onDragStart:r,onDragStop:s,onNodeMouseDown:i,getStoreItems:()=>{const{snapGrid:u,viewport:c}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[c.x,c.y,c.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function f(u,c){if(c.disabled){a.destroy();return}a.update({domNode:u,noDragClassName:c.noDragClass,handleSelector:c.handleSelector,nodeId:c.nodeId,isSelectable:c.isSelectable,nodeClickDistance:c.nodeClickDistance})}return f(t,e),{update(u){f(t,u)},destroy(){a.destroy()}}}var sc=G('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-13pq11u"> </div>'),ac=G('<div class="a11y-hidden svelte-13pq11u"> </div> <div class="a11y-hidden svelte-13pq11u"> </div> <!>',1);function lc(t,e){J(e,!0);var n=ac(),o=ne(n),r=Q(o,!0);q(o);var s=j(o,2),i=Q(s,!0);q(s);var a=j(s,2);{var f=u=>{var c=sc(),h=Q(c,!0);q(c),ie(()=>{oe(c,"id",`${cc}-${e.store.flowId}`),we(h,e.store.ariaLiveMessage)}),z(u,c)};ue(a,u=>{e.store.disableKeyboardA11y||u(f)})}ie(()=>{oe(o,"id",`${Rr}-${e.store.flowId}`),we(r,e.store.disableKeyboardA11y?e.store.ariaLabelConfig["node.a11yDescription.default"]:e.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),oe(s,"id",`${Vr}-${e.store.flowId}`),we(i,e.store.ariaLabelConfig["edge.a11yDescription.default"])}),z(t,n),$()}const Rr="svelte-flow__node-desc",Vr="svelte-flow__edge-desc",cc="svelte-flow__aria-live";var dc=G("<div><!></div>");function uc(t,e){J(e,!0);let n=L(e,"store",15),o=m(()=>pe(e.node.data,()=>({}),!0)),r=m(()=>pe(e.node.selected,!1)),s=m(()=>e.node.draggable),i=m(()=>e.node.selectable),a=m(()=>pe(e.node.deletable,!0)),f=m(()=>e.node.connectable),u=m(()=>e.node.focusable),c=m(()=>pe(e.node.hidden,!1)),h=m(()=>pe(e.node.dragging,!1)),d=m(()=>pe(e.node.style,"")),y=m(()=>e.node.class),v=m(()=>pe(e.node.type,"default")),x=m(()=>e.node.parentId),_=m(()=>e.node.sourcePosition),P=m(()=>e.node.targetPosition),N=m(()=>pe(e.node.measured,()=>({width:0,height:0}),!0).width),T=m(()=>pe(e.node.measured,()=>({width:0,height:0}),!0).height),S=m(()=>e.node.initialWidth),H=m(()=>e.node.initialHeight),I=m(()=>e.node.width),K=m(()=>e.node.height),M=m(()=>e.node.dragHandle),V=m(()=>pe(e.node.internals.z,0)),X=m(()=>e.node.internals.positionAbsolute.x),E=m(()=>e.node.internals.positionAbsolute.y),p=m(()=>e.node.internals.userNode),{id:k}=e.node,g=m(()=>l(s)??n().nodesDraggable),w=m(()=>l(i)??n().elementsSelectable),b=m(()=>l(f)??n().nodesConnectable),C=m(()=>Va(e.node)),D=m(()=>!!e.node.internals.handleBounds),O=m(()=>l(C)&&l(D)),R=m(()=>l(u)??n().nodesFocusable);function B(ae){return n().parentLookup.has(ae)}let F=m(()=>B(k)),W=ce(null),Z=null,re=l(v),ee=l(_),U=l(P),te=m(()=>n().nodeTypes[l(v)]??zr),le=m(()=>n().ariaLabelConfig),ve={get value(){return l(b)}};Nl(k),Ml(ve);let se=m(()=>{const ae=l(N)===void 0?l(I)??l(S):l(I),me=l(T)===void 0?l(K)??l(H):l(K);if(!(ae===void 0&&me===void 0&&l(d)===void 0))return`${l(d)};${ae?`width:${Ke(ae)};`:""}${me?`height:${Ke(me)};`:""}`});et(()=>{(l(v)!==re||l(_)!==ee||l(P)!==U)&&l(W)!==null&&requestAnimationFrame(()=>{l(W)!==null&&n().updateNodeInternals(new Map([[k,{id:k,nodeElement:l(W),force:!0}]]))}),re=l(v),ee=l(_),U=l(P)}),et(()=>{e.resizeObserver&&(!l(O)||l(W)!==Z)&&(Z&&e.resizeObserver.unobserve(Z),l(W)&&e.resizeObserver.observe(l(W)),Z=l(W))}),Vn(()=>{Z&&e.resizeObserver?.unobserve(Z)});function _e(ae){l(w)&&(!n().selectNodesOnDrag||!l(g)||n().nodeDragThreshold>0)&&n().handleNodeSelection(k),e.onnodeclick?.({node:l(p),event:ae})}function fe(ae){if(!(pr(ae)||n().disableKeyboardA11y))if(ur.includes(ae.key)&&l(w)){const me=ae.key==="Escape";n().handleNodeSelection(k,me,l(W))}else l(g)&&e.node.selected&&Object.prototype.hasOwnProperty.call(on,ae.key)&&(ae.preventDefault(),n(n().ariaLiveMessage=l(le)["node.a11yDescription.ariaLiveMessage"]({direction:ae.key.replace("Arrow","").toLowerCase(),x:~~e.node.internals.positionAbsolute.x,y:~~e.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(on[ae.key],ae.shiftKey?4:1))}const Ce=()=>{if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!l(W)?.matches(":focus-visible"))return;const{width:ae,height:me,viewport:Ze}=n();Gn(new Map([[k,e.node]]),{x:0,y:0,width:ae,height:me},[Ze.x,Ze.y,Ze.zoom],!0).length>0||n().setCenter(e.node.position.x+(e.node.measured.width??0)/2,e.node.position.y+(e.node.measured.height??0)/2,{zoom:Ze.zoom})};var at=de(),lt=ne(at);{var bt=ae=>{var me=dc();Ee(me,()=>({"data-id":k,class:["svelte-flow__node",`svelte-flow__node-${l(v)}`,l(y)],style:l(se),onclick:_e,onpointerenter:e.onnodepointerenter?he=>e.onnodepointerenter({node:l(p),event:he}):void 0,onpointerleave:e.onnodepointerleave?he=>e.onnodepointerleave({node:l(p),event:he}):void 0,onpointermove:e.onnodepointermove?he=>e.onnodepointermove({node:l(p),event:he}):void 0,oncontextmenu:e.onnodecontextmenu?he=>e.onnodecontextmenu({node:l(p),event:he}):void 0,onkeydown:l(R)?fe:void 0,onfocus:l(R)?Ce:void 0,tabIndex:l(R)?0:void 0,role:e.node.ariaRole??(l(R)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${Rr}-${n().flowId}`,...e.node.domAttributes,[Kn]:{dragging:l(h),selected:l(r),draggable:l(g),connectable:l(b),selectable:l(w),nopan:l(g),parent:l(F)},[Bn]:{"z-index":l(V),transform:`translate(${l(X)??""}px, ${l(E)??""}px)`,visibility:l(C)?"visible":"hidden"}}));var Ze=Q(me);He(Ze,()=>l(te),(he,ct)=>{ct(he,{get data(){return l(o)},get id(){return k},get selected(){return l(r)},get selectable(){return l(w)},get deletable(){return l(a)},get sourcePosition(){return l(_)},get targetPosition(){return l(P)},get zIndex(){return l(V)},get dragging(){return l(h)},get draggable(){return l(g)},get dragHandle(){return l(M)},get parentId(){return l(x)},get type(){return l(v)},get isConnectable(){return l(b)},get positionAbsoluteX(){return l(X)},get positionAbsoluteY(){return l(E)},get width(){return l(I)},get height(){return l(K)}})}),q(me),xe(me,(he,ct)=>Hr?.(he,ct),()=>({nodeId:k,isSelectable:l(w),disabled:!l(g),handleSelector:l(M),noDragClass:n().noDragClass,nodeClickDistance:e.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(he,ct,_t,kt)=>{e.onnodedrag?.({event:he,targetNode:_t,nodes:kt})},onDragStart:(he,ct,_t,kt)=>{e.onnodedragstart?.({event:he,targetNode:_t,nodes:kt})},onDragStop:(he,ct,_t,kt)=>{e.onnodedragstop?.({event:he,targetNode:_t,nodes:kt})},store:n()})),Te(me,he=>A(W,he),()=>l(W)),z(ae,me)};ue(lt,ae=>{l(c)||ae(bt)})}z(t,at),$()}var fc=G('<div class="svelte-flow__nodes"></div>');function hc(t,e){J(e,!0);let n=L(e,"store",15);const o=typeof ResizeObserver>"u"?null:new ResizeObserver(s=>{const i=new Map;s.forEach(a=>{const f=a.target.getAttribute("data-id");i.set(f,{id:f,nodeElement:a.target,force:!0})}),n().updateNodeInternals(i)});Vn(()=>{o?.disconnect()});var r=fc();tt(r,21,()=>n().visible.nodes.values(),s=>s.id,(s,i)=>{uc(s,{get node(){return l(i)},get resizeObserver(){return o},get nodeClickDistance(){return e.nodeClickDistance},get onnodeclick(){return e.onnodeclick},get onnodepointerenter(){return e.onnodepointerenter},get onnodepointermove(){return e.onnodepointermove},get onnodepointerleave(){return e.onnodepointerleave},get onnodedrag(){return e.onnodedrag},get onnodedragstart(){return e.onnodedragstart},get onnodedragstop(){return e.onnodedragstop},get onnodecontextmenu(){return e.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),q(r),z(t,r),$()}var gc=Ne('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function mc(t,e){J(e,!0);let n=m(()=>e.edge.id),o=m(()=>e.edge.source),r=m(()=>e.edge.target),s=m(()=>e.edge.sourceX),i=m(()=>e.edge.sourceY),a=m(()=>e.edge.targetX),f=m(()=>e.edge.targetY),u=m(()=>e.edge.sourcePosition),c=m(()=>e.edge.targetPosition),h=m(()=>pe(e.edge.animated,!1)),d=m(()=>pe(e.edge.selected,!1)),y=m(()=>e.edge.label),v=m(()=>e.edge.labelStyle),x=m(()=>pe(e.edge.data,()=>({}),!0)),_=m(()=>e.edge.style),P=m(()=>e.edge.interactionWidth),N=m(()=>pe(e.edge.type,"default")),T=m(()=>e.edge.sourceHandle),S=m(()=>e.edge.targetHandle),H=m(()=>e.edge.markerStart),I=m(()=>e.edge.markerEnd),K=m(()=>e.edge.selectable),M=m(()=>e.edge.focusable),V=m(()=>pe(e.edge.deletable,!0)),X=m(()=>e.edge.hidden),E=m(()=>e.edge.zIndex),p=m(()=>e.edge.class),k=m(()=>e.edge.ariaLabel);Il(l(n));let g=null,w=m(()=>l(K)??e.store.elementsSelectable),b=m(()=>l(M)??e.store.edgesFocusable),C=m(()=>e.store.edgeTypes[l(N)]??Tr),D=m(()=>l(H)?`url('#${On(l(H),e.store.flowId)}')`:void 0),O=m(()=>l(I)?`url('#${On(l(I),e.store.flowId)}')`:void 0);function R(ee){const U=e.store.edgeLookup.get(l(n));U&&(l(w)&&e.store.handleEdgeSelection(l(n)),e.onedgeclick?.({event:ee,edge:U}))}function B(ee,U){const te=e.store.edgeLookup.get(l(n));te&&U({event:ee,edge:te})}function F(ee){if(!e.store.disableKeyboardA11y&&ur.includes(ee.key)&&l(w)){const{unselectNodesAndEdges:U,addSelectedEdges:te}=e.store;ee.key==="Escape"?(g?.blur(),U({edges:[e.edge]})):te([l(n)])}}var W=de(),Z=ne(W);{var re=ee=>{var U=gc();let te;var le=Q(U);Ee(le,()=>({class:["svelte-flow__edge",l(p)],"data-id":l(n),onclick:R,oncontextmenu:e.onedgecontextmenu?se=>{B(se,e.onedgecontextmenu)}:void 0,onpointerenter:e.onedgepointerenter?se=>{B(se,e.onedgepointerenter)}:void 0,onpointerleave:e.onedgepointerleave?se=>{B(se,e.onedgepointerleave)}:void 0,"aria-label":l(k)===null?void 0:l(k)?l(k):`Edge from ${l(o)} to ${l(r)}`,"aria-describedby":l(b)?`${Vr}-${e.store.flowId}`:void 0,role:e.edge.ariaRole??(l(b)?"group":"img"),"aria-roledescription":"edge",onkeydown:l(b)?F:void 0,tabindex:l(b)?0:void 0,...e.edge.domAttributes,[Kn]:{animated:l(h),selected:l(d),selectable:l(w)}}));var ve=Q(le);He(ve,()=>l(C),(se,_e)=>{_e(se,{get id(){return l(n)},get source(){return l(o)},get target(){return l(r)},get sourceX(){return l(s)},get sourceY(){return l(i)},get targetX(){return l(a)},get targetY(){return l(f)},get sourcePosition(){return l(u)},get targetPosition(){return l(c)},get animated(){return l(h)},get selected(){return l(d)},get label(){return l(y)},get labelStyle(){return l(v)},get data(){return l(x)},get style(){return l(_)},get interactionWidth(){return l(P)},get selectable(){return l(w)},get deletable(){return l(V)},get type(){return l(N)},get sourceHandleId(){return l(T)},get targetHandleId(){return l(S)},get markerStart(){return l(D)},get markerEnd(){return l(O)}})}),q(le),Te(le,se=>g=se,()=>g),q(U),ie(()=>te=ze(U,"",te,{"z-index":l(E)})),z(ee,U)};ue(Z,ee=>{l(X)||ee(re)})}z(t,W),$()}var yc=Ne("<defs></defs>");function vc(t,e){J(e,!1);const n=wt();ei();var o=yc();tt(o,5,()=>n.markers,r=>r.id,(r,s)=>{bc(r,Ln(()=>l(s)))}),q(o),z(t,o),$()}var pc=Ne('<polyline class="arrow" fill="none" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4"></polyline>'),xc=Ne('<polyline class="arrowclosed" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),wc=Ne('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function bc(t,e){J(e,!0);let n=L(e,"width",3,12.5),o=L(e,"height",3,12.5),r=L(e,"markerUnits",3,"strokeWidth"),s=L(e,"orient",3,"auto-start-reverse"),i=L(e,"color",3,"none");var a=wc(),f=Q(a);{var u=h=>{var d=pc();let y;ie(()=>{oe(d,"stroke-width",e.strokeWidth),y=ze(d,"",y,{stroke:i()})}),z(h,d)},c=h=>{var d=de(),y=ne(d);{var v=x=>{var _=xc();let P;ie(()=>{oe(_,"stroke-width",e.strokeWidth),P=ze(_,"",P,{stroke:i(),fill:i()})}),z(x,_)};ue(y,x=>{e.type===$t.ArrowClosed&&x(v)},!0)}z(h,d)};ue(f,h=>{e.type===$t.Arrow?h(u):h(c,!1)})}q(a),ie(()=>{oe(a,"id",e.id),oe(a,"markerWidth",`${n()}`),oe(a,"markerHeight",`${o()}`),oe(a,"markerUnits",r()),oe(a,"orient",s())}),z(t,a),$()}var _c=G('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function kc(t,e){J(e,!0);let n=L(e,"store",15);var o=_c(),r=Q(o),s=Q(r);vc(s,{}),q(r);var i=j(r,2);tt(i,17,()=>n().visible.edges.values(),a=>a.id,(a,f)=>{mc(a,{get edge(){return l(f)},get onedgeclick(){return e.onedgeclick},get onedgecontextmenu(){return e.onedgecontextmenu},get onedgepointerenter(){return e.onedgepointerenter},get onedgepointerleave(){return e.onedgepointerleave},get store(){return n()},set store(u){n(u)}})}),q(o),z(t,o),$()}var Sc=G('<div class="svelte-flow__selection svelte-1vr3gfi"></div>');function Lr(t,e){J(e,!0);let n=L(e,"x",3,0),o=L(e,"y",3,0),r=L(e,"width",3,0),s=L(e,"height",3,0),i=L(e,"isVisible",3,!0);var a=de(),f=ne(a);{var u=c=>{var h=Sc();let d;ie(y=>d=ze(h,"",d,y),[()=>({width:typeof r()=="string"?r():Ke(r()),height:typeof s()=="string"?s():Ke(s()),transform:`translate(${n()}px, ${o()}px)`})]),z(c,h)};ue(f,c=>{i()&&c(u)})}z(t,a),$()}var Ec=G("<div><!></div>");function Pc(t,e){J(e,!0);let n=ce(void 0);et(()=>{e.store.disableKeyboardA11y||l(n)?.focus({preventScroll:!0})});let o=m(()=>{if(e.store.selectionRectMode==="nodes"){e.store.nodes;const c=cn(e.store.nodeLookup,{filter:h=>!!h.selected});if(c.width>0&&c.height>0)return c}return null});function r(c){const h=e.store.nodes.filter(d=>d.selected);e.onselectioncontextmenu?.({nodes:h,event:c})}function s(c){const h=e.store.nodes.filter(d=>d.selected);e.onselectionclick?.({nodes:h,event:c})}function i(c){Object.prototype.hasOwnProperty.call(on,c.key)&&(c.preventDefault(),e.store.moveSelectedNodes(on[c.key],c.shiftKey?4:1))}var a=de(),f=ne(a);{var u=c=>{var h=Ec();h.__contextmenu=r,h.__click=s,h.__keydown=function(...v){(e.store.disableKeyboardA11y?void 0:i)?.apply(this,v)};let d;var y=Q(h);Lr(y,{width:"100%",height:"100%",x:0,y:0}),q(h),xe(h,(v,x)=>Hr?.(v,x),()=>({disabled:!1,store:e.store,onDrag:(v,x,_,P)=>{e.onnodedrag?.({event:v,targetNode:null,nodes:P})},onDragStart:(v,x,_,P)=>{e.onnodedragstart?.({event:v,targetNode:null,nodes:P})},onDragStop:(v,x,_,P)=>{e.onnodedragstop?.({event:v,targetNode:null,nodes:P})}})),Te(h,v=>A(n,v),()=>l(n)),ie(v=>{Ue(h,1,it(["svelte-flow__selection-wrapper",e.store.noPanClass]),"svelte-sf2y5e"),oe(h,"role",e.store.disableKeyboardA11y?void 0:"button"),oe(h,"tabindex",e.store.disableKeyboardA11y?void 0:-1),d=ze(h,"",d,v)},[()=>({width:Ke(l(o).width),height:Ke(l(o).height),transform:`translate(${l(o).x??""}px, ${l(o).y??""}px)`})]),z(c,h)};ue(f,c=>{e.store.selectionRectMode==="nodes"&&l(o)&&Fe(l(o).x)&&Fe(l(o).y)&&c(u)})}z(t,a),$()}Wo(["contextmenu","click","keydown"]);function Nc(t){switch(t){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function Oe(t,e){let{enabled:n=!0,trigger:o,type:r="keydown"}=e;function s(a){const f=Array.isArray(o)?o:[o],u=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((c,h,d)=>h?c|1<<d:c,0);for(const c of f){const h={preventDefault:!1,enabled:!0,...c},{modifier:d,key:y,callback:v,preventDefault:x,enabled:_}=h;if(_){if(a.key!==y)continue;if(d===null||d===!1){if(u!==0)continue}else if(d!==void 0&&d?.[0]?.length>0){const N=Array.isArray(d)?d:[d];let T=!1;for(const S of N)if((Array.isArray(S)?S:[S]).reduce((I,K)=>I|Nc(K),0)===u){T=!0;break}if(!T)continue}x&&a.preventDefault();const P={node:t,trigger:h,originalEvent:a};t.dispatchEvent(new CustomEvent("shortcut",{detail:P})),v?.(P)}}}let i;return n&&(i=oo(t,r,s)),{update:a=>{const{enabled:f=!0,type:u="keydown"}=a;n&&(!f||r!==u)?i?.():!n&&f&&(i=oo(t,u,s)),n=f,r=u,o=a.trigger},destroy:()=>{i?.()}}}function Cc(){const t=m(wt),e=s=>{const i=Ro(s)?s:l(t).nodeLookup.get(s.id),a=i.parentId?La(i.position,i.measured,i.parentId,l(t).nodeLookup,l(t).nodeOrigin):i.position,f={...i,position:a,width:i.measured?.width??i.width,height:i.measured?.height??i.height};return vt(f)};function n(s,i,a={replace:!1}){l(t).nodes=je(()=>l(t).nodes).map(f=>{if(f.id===s){const u=typeof i=="function"?i(f):i;return a?.replace&&Ro(u)?u:{...f,...u}}return f})}function o(s,i,a={replace:!1}){l(t).edges=je(()=>l(t).edges).map(f=>{if(f.id===s){const u=typeof i=="function"?i(f):i;return a.replace&&Bl(u)?u:{...f,...u}}return f})}const r=s=>l(t).nodeLookup.get(s);return{zoomIn:l(t).zoomIn,zoomOut:l(t).zoomOut,getInternalNode:r,getNode:s=>r(s)?.internals.userNode,getNodes:s=>s===void 0?l(t).nodes:Zo(l(t).nodeLookup,s),getEdge:s=>l(t).edgeLookup.get(s),getEdges:s=>s===void 0?l(t).edges:Zo(l(t).edgeLookup,s),setZoom:(s,i)=>{const a=l(t).panZoom;return a?a.scaleTo(s,{duration:i?.duration}):Promise.resolve(!1)},getZoom:()=>l(t).viewport.zoom,setViewport:async(s,i)=>{const a=l(t).viewport;return l(t).panZoom?(await l(t).panZoom.setViewport({x:s.x??a.x,y:s.y??a.y,zoom:s.zoom??a.zoom},i),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>Go(l(t).viewport),setCenter:async(s,i,a)=>l(t).setCenter(s,i,a),fitView:s=>l(t).fitView(s),fitBounds:async(s,i)=>{if(!l(t).panZoom)return Promise.resolve(!1);const a=Un(s,l(t).width,l(t).height,l(t).minZoom,l(t).maxZoom,i?.padding??.1);return await l(t).panZoom.setViewport(a,{duration:i?.duration,ease:i?.ease,interpolate:i?.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(s,i=!0,a)=>{const f=Eo(s),u=f?s:e(s);return u?(a||l(t).nodes).filter(c=>{const h=l(t).nodeLookup.get(c.id);if(!h||!f&&c.id===s.id)return!1;const d=vt(h),y=It(d,u);return i&&y>0||y>=d.width*d.height||y>=u.width*u.height}):[]},isNodeIntersecting:(s,i,a=!0)=>{const u=Eo(s)?s:e(s);if(!u)return!1;const c=It(u,i);return a&&c>0||c>=i.width*i.height||c>=u.width*u.height},deleteElements:async({nodes:s=[],edges:i=[]})=>{const{nodes:a,edges:f}=await Ta({nodesToRemove:s,edgesToRemove:i,nodes:l(t).nodes,edges:l(t).edges,onBeforeDelete:l(t).onbeforedelete});return a&&(l(t).nodes=je(()=>l(t).nodes).filter(u=>!a.some(({id:c})=>c===u.id))),f&&(l(t).edges=je(()=>l(t).edges).filter(u=>!f.some(({id:c})=>c===u.id))),(a.length>0||f.length>0)&&l(t).ondelete?.({nodes:a,edges:f}),{deletedNodes:a,deletedEdges:f}},screenToFlowPosition:(s,i={snapToGrid:!0})=>{if(!l(t).domNode)return s;const a=i.snapToGrid?l(t).snapGrid:!1,{x:f,y:u,zoom:c}=l(t).viewport,{x:h,y:d}=l(t).domNode.getBoundingClientRect(),y={x:s.x-h,y:s.y-d};return Ht(y,[f,u,c],a!==null,a||[1,1])},flowToScreenPosition:s=>{if(!l(t).domNode)return s;const{x:i,y:a,zoom:f}=l(t).viewport,{x:u,y:c}=l(t).domNode.getBoundingClientRect(),h=tn(s,[i,a,f]);return{x:h.x+u,y:h.y+c}},toObject:()=>structuredClone({nodes:[...l(t).nodes],edges:[...l(t).edges],viewport:{...l(t).viewport}}),updateNode:n,updateNodeData:(s,i,a)=>{const f=l(t).nodeLookup.get(s)?.internals.userNode;if(!f)return;const u=typeof i=="function"?i(f):i;n(s,c=>({...c,data:a?.replace?u:{...c.data,...u}}))},updateEdge:o,getNodesBounds:s=>Ma(s,{nodeLookup:l(t).nodeLookup,nodeOrigin:l(t).nodeOrigin}),getHandleConnections:({type:s,id:i,nodeId:a})=>Array.from(l(t).connectionLookup.get(`${a}-${s}-${i??null}`)?.values()??[])}}function Zo(t,e){const n=[];for(const o of e){const r=t.get(o);if(r){const s="internals"in r?r.internals?.userNode:r;n.push(s)}}return n}function Mc(t,e){J(e,!0);let n=L(e,"store",15),o=L(e,"selectionKey",3,"Shift"),r=L(e,"multiSelectionKey",19,()=>nn()?"Meta":"Control"),s=L(e,"deleteKey",3,"Backspace"),i=L(e,"panActivationKey",3," "),a=L(e,"zoomActivationKey",19,()=>nn()?"Meta":"Control"),{deleteElements:f}=Cc();function u(x){return x!==null&&typeof x=="object"}function c(x){return u(x)?x.modifier||[]:[]}function h(x){return x==null?"":u(x)?x.key:x}function d(x,_){return(Array.isArray(x)?x:[x]).map(N=>{const T=h(N);return{key:T,modifier:c(N),enabled:T!==null,callback:_}})}function y(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}function v(){const x=n().nodes.filter(P=>P.selected),_=n().edges.filter(P=>P.selected);f({nodes:x,edges:_})}qt("blur",Pe,y),qt("contextmenu",Pe,y),xe(Pe,(x,_)=>Oe?.(x,_),()=>({trigger:d(o(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),xe(Pe,(x,_)=>Oe?.(x,_),()=>({trigger:d(o(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),xe(Pe,(x,_)=>Oe?.(x,_),()=>({trigger:d(r(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),xe(Pe,(x,_)=>Oe?.(x,_),()=>({trigger:d(r(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),xe(Pe,(x,_)=>Oe?.(x,_),()=>({trigger:d(s(),x=>{!(x.originalEvent.ctrlKey||x.originalEvent.metaKey||x.originalEvent.shiftKey)&&!pr(x.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),v())}),type:"keydown"})),xe(Pe,(x,_)=>Oe?.(x,_),()=>({trigger:d(s(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),xe(Pe,(x,_)=>Oe?.(x,_),()=>({trigger:d(i(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),xe(Pe,(x,_)=>Oe?.(x,_),()=>({trigger:d(i(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),xe(Pe,(x,_)=>Oe?.(x,_),()=>({trigger:d(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),xe(Pe,(x,_)=>Oe?.(x,_),()=>({trigger:d(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),$()}var Dc=Ne('<path fill="none" class="svelte-flow__connection-path"></path>'),Ic=Ne('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function zc(t,e){J(e,!0);let n=m(()=>{if(!e.store.connection.inProgress)return"";const i={sourceX:e.store.connection.from.x,sourceY:e.store.connection.from.y,sourcePosition:e.store.connection.fromPosition,targetX:e.store.connection.to.x,targetY:e.store.connection.to.y,targetPosition:e.store.connection.toPosition};switch(e.type){case qe.Bezier:{const[a]=wr(i);return a}case qe.Straight:{const[a]=_r(i);return a}case qe.Step:case qe.SmoothStep:{const[a]=jn({...i,borderRadius:e.type===qe.Step?0:void 0});return a}}});var o=de(),r=ne(o);{var s=i=>{var a=Ic(),f=Q(a),u=Q(f);{var c=d=>{var y=de(),v=ne(y);He(v,()=>e.LineComponent,(x,_)=>{_(x,{})}),z(d,y)},h=d=>{var y=Dc();ie(()=>{oe(y,"d",l(n)),ze(y,e.style)}),z(d,y)};ue(u,d=>{e.LineComponent?d(c):d(h,!1)})}q(f),q(a),ie(d=>{oe(a,"width",e.store.width),oe(a,"height",e.store.height),ze(a,e.containerStyle),Ue(f,0,d)},[()=>it(["svelte-flow__connection",Na(e.store.connection.isValid)])]),z(i,a)};ue(r,i=>{e.store.connection.inProgress&&i(s)})}z(t,o),$()}var Tc=G("<div><!></div>");function Ac(t,e){J(e,!0);let n=L(e,"position",3,"top-right"),o=Se(e,["$$slots","$$events","$$legacy","position","style","class","children"]),r=m(()=>`${n()}`.split("-"));var s=Tc();Ee(s,a=>({class:a,style:e.style,...o}),[()=>["svelte-flow__panel",e.class,...l(r)]]);var i=Q(s);ye(i,()=>e.children??ke),q(s),z(t,s),$()}var Oc=G('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function Hc(t,e){J(e,!0);let n=L(e,"position",3,"bottom-right");var o=de(),r=ne(o);{var s=i=>{Ac(i,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,f)=>{var u=Oc();z(a,u)},$$slots:{default:!0}})};ue(r,i=>{e.proOptions?.hideAttribution||i(s)})}z(t,o),$()}var Rc=G("<div><!></div>");function Vc(t,e){J(e,!0);let n=L(e,"domNode",15),o=L(e,"clientWidth",15),r=L(e,"clientHeight",15),s=m(()=>e.rest.class),i=m(()=>Fr(e.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig","autoPanSpeed","panOnScrollSpeed","zIndexMode"]));function a(c){c.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),e.rest.onscroll&&e.rest.onscroll(c)}var f=Rc();Ee(f,c=>({class:["svelte-flow","svelte-flow__container",l(s),e.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:a,...l(i),[Bn]:c}),[()=>({width:Ke(e.width),height:Ke(e.height)})],void 0,void 0,"svelte-mkap6j");var u=Q(f);ye(u,()=>e.children??ke),q(f),Te(f,c=>n(c),()=>n()),io(f,"clientHeight",r),io(f,"clientWidth",o),z(t,f),$()}var Lc=G('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),Kc=G("<!> <!>",1),Bc=G("<!> <!> <!> <!> <!>",1);function Zc(t,e){J(e,!0);let n=L(e,"paneClickDistance",3,1),o=L(e,"nodeClickDistance",3,1),r=L(e,"panOnScrollMode",19,()=>gt.Free),s=L(e,"preventScrolling",3,!0),i=L(e,"zoomOnScroll",3,!0),a=L(e,"zoomOnDoubleClick",3,!0),f=L(e,"zoomOnPinch",3,!0),u=L(e,"panOnScroll",3,!1),c=L(e,"panOnScrollSpeed",3,.5),h=L(e,"panOnDrag",3,!0),d=L(e,"selectionOnDrag",3,!1),y=L(e,"connectionLineType",19,()=>qe.Bezier),v=L(e,"nodes",31,()=>no([])),x=L(e,"edges",31,()=>no([])),_=L(e,"viewport",15,void 0),P=Se(e,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),N=Jl({props:P,width:e.width,height:e.height,get nodes(){return v()},set nodes(S){v(S)},get edges(){return x()},set edges(S){x(S)},get viewport(){return _()},set viewport(S){_(S)}});const T=Rn(Hn);T&&T.setStore&&T.setStore(N),Xo(Hn,{provider:!1,getStore(){return N}}),et(()=>{const S={nodes:N.selectedNodes,edges:N.selectedEdges};je(()=>e.onselectionchange)?.(S);for(const H of N.selectionChangeHandlers.values())H(S)}),Vn(()=>{N.reset()}),Vc(t,{get colorMode(){return N.colorMode},get width(){return e.width},get height(){return e.height},get rest(){return P},get domNode(){return N.domNode},set domNode(S){N.domNode=S},get clientWidth(){return N.width},set clientWidth(S){N.width=S},get clientHeight(){return N.height},set clientHeight(S){N.height=S},children:(S,H)=>{var I=Bc(),K=ne(I);Mc(K,{get selectionKey(){return e.selectionKey},get deleteKey(){return e.deleteKey},get panActivationKey(){return e.panActivationKey},get multiSelectionKey(){return e.multiSelectionKey},get zoomActivationKey(){return e.zoomActivationKey},get store(){return N},set store(p){N=p}});var M=j(K,2);tc(M,{get panOnScrollMode(){return r()},get preventScrolling(){return s()},get zoomOnScroll(){return i()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return f()},get panOnScroll(){return u()},get panOnScrollSpeed(){return c()},get panOnDrag(){return h()},get paneClickDistance(){return n()},get selectionOnDrag(){return d()},get onmovestart(){return e.onmovestart},get onmove(){return e.onmove},get onmoveend(){return e.onmoveend},get oninit(){return e.oninit},get store(){return N},set store(p){N=p},children:(p,k)=>{oc(p,{get onpaneclick(){return e.onpaneclick},get onpanecontextmenu(){return e.onpanecontextmenu},get onselectionstart(){return e.onselectionstart},get onselectionend(){return e.onselectionend},get panOnDrag(){return h()},get paneClickDistance(){return n()},get selectionOnDrag(){return d()},get store(){return N},set store(g){N=g},children:(g,w)=>{var b=Kc(),C=ne(b);ic(C,{get store(){return N},set store(O){N=O},children:(O,R)=>{var B=Lc(),F=j(ne(B),2);kc(F,{get onedgeclick(){return e.onedgeclick},get onedgecontextmenu(){return e.onedgecontextmenu},get onedgepointerenter(){return e.onedgepointerenter},get onedgepointerleave(){return e.onedgepointerleave},get store(){return N},set store(ee){N=ee}});var W=j(F,4);zc(W,{get type(){return y()},get LineComponent(){return e.connectionLineComponent},get containerStyle(){return e.connectionLineContainerStyle},get style(){return e.connectionLineStyle},get store(){return N},set store(ee){N=ee}});var Z=j(W,2);hc(Z,{get nodeClickDistance(){return o()},get onnodeclick(){return e.onnodeclick},get onnodecontextmenu(){return e.onnodecontextmenu},get onnodepointerenter(){return e.onnodepointerenter},get onnodepointermove(){return e.onnodepointermove},get onnodepointerleave(){return e.onnodepointerleave},get onnodedrag(){return e.onnodedrag},get onnodedragstart(){return e.onnodedragstart},get onnodedragstop(){return e.onnodedragstop},get store(){return N},set store(ee){N=ee}});var re=j(Z,2);Pc(re,{get onselectionclick(){return e.onselectionclick},get onselectioncontextmenu(){return e.onselectioncontextmenu},get onnodedrag(){return e.onnodedrag},get onnodedragstart(){return e.onnodedragstart},get onnodedragstop(){return e.onnodedragstop},get store(){return N},set store(ee){N=ee}}),$e(2),z(O,B)},$$slots:{default:!0}});var D=j(C,2);{let O=m(()=>!!(N.selectionRect&&N.selectionRectMode==="user")),R=m(()=>N.selectionRect?.width),B=m(()=>N.selectionRect?.height),F=m(()=>N.selectionRect?.x),W=m(()=>N.selectionRect?.y);Lr(D,{get isVisible(){return l(O)},get width(){return l(R)},get height(){return l(B)},get x(){return l(F)},get y(){return l(W)}})}z(g,b)},$$slots:{default:!0}})},$$slots:{default:!0}});var V=j(M,2);Hc(V,{get proOptions(){return e.proOptions},get position(){return e.attributionPosition}});var X=j(V,2);lc(X,{get store(){return N}});var E=j(X,2);ye(E,()=>e.children??ke),z(S,I)},$$slots:{default:!0}}),$()}var Ge;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Ge||(Ge={}));var Yc=Ne("<circle></circle>");function Xc(t,e){var n=Yc();ie(()=>{oe(n,"cx",e.radius),oe(n,"cy",e.radius),oe(n,"r",e.radius),Ue(n,0,it(["svelte-flow__background-pattern","dots",e.class]))}),z(t,n)}var Fc=Ne("<path></path>");function Wc(t,e){J(e,!0);var n=Fc();ie(()=>{oe(n,"stroke-width",e.lineWidth),oe(n,"d",`M${e.dimensions[0]/2} 0 V${e.dimensions[1]} M0 ${e.dimensions[1]/2} H${e.dimensions[0]}`),Ue(n,0,it(["svelte-flow__background-pattern",e.variant,e.class]))}),z(t,n),$()}const qc={[Ge.Dots]:1,[Ge.Lines]:1,[Ge.Cross]:6};var Gc=Ne('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function Uc(t,e){J(e,!0);let n=L(e,"variant",19,()=>Ge.Dots),o=L(e,"gap",3,20),r=L(e,"lineWidth",3,1),s=m(wt),i=m(()=>n()===Ge.Dots),a=m(()=>n()===Ge.Cross),f=m(()=>Array.isArray(o())?o():[o(),o()]),u=m(()=>`background-pattern-${l(s).flowId}-${e.id??""}`),c=m(()=>[l(f)[0]*l(s).viewport.zoom||1,l(f)[1]*l(s).viewport.zoom||1]),h=m(()=>(e.size??qc[n()])*l(s).viewport.zoom),d=m(()=>l(a)?[l(h),l(h)]:l(c)),y=m(()=>l(i)?[l(h)/2,l(h)/2]:[l(d)[0]/2,l(d)[1]/2]);var v=Gc();let x;var _=Q(v),P=Q(_);{var N=H=>{{let I=m(()=>l(h)/2);Xc(H,{get radius(){return l(I)},get class(){return e.patternClass}})}},T=H=>{Wc(H,{get dimensions(){return l(d)},get variant(){return n()},get lineWidth(){return r()},get class(){return e.patternClass}})};ue(P,H=>{l(i)?H(N):H(T,!1)})}q(_);var S=j(_);q(v),ie(()=>{Ue(v,0,it(["svelte-flow__background","svelte-flow__container",e.class])),x=ze(v,"",x,{"--xy-background-color-props":e.bgColor,"--xy-background-pattern-color-props":e.patternColor}),oe(_,"id",l(u)),oe(_,"x",l(s).viewport.x%l(c)[0]),oe(_,"y",l(s).viewport.y%l(c)[1]),oe(_,"width",l(c)[0]),oe(_,"height",l(c)[1]),oe(_,"patternTransform",`translate(-${l(y)[0]},-${l(y)[1]})`),oe(S,"fill",`url(#${l(u)})`)}),z(t,v),$()}var jc=G('<div class="image-node"><img/></div> <!> <!> <!> <!> <!> <!> <!> <!>',1);function Qc(t,e){J(e,!0);let n=e.data;var o=jc(),r=ne(o),s=Q(r);q(r);var i=j(r,2);ge(i,{type:"target",get position(){return Y.Top},id:"top"});var a=j(i,2);ge(a,{type:"target",get position(){return Y.Left},id:"left"});var f=j(a,2);ge(f,{type:"target",get position(){return Y.Right},id:"right"});var u=j(f,2);ge(u,{type:"target",get position(){return Y.Bottom},id:"bottom"});var c=j(u,2);ge(c,{type:"source",get position(){return Y.Top},id:"top"});var h=j(c,2);ge(h,{type:"source",get position(){return Y.Left},id:"left"});var d=j(h,2);ge(d,{type:"source",get position(){return Y.Right},id:"right"});var y=j(d,2);ge(y,{type:"source",get position(){return Y.Bottom},id:"bottom"}),ie(()=>{oe(s,"src",n.content),oe(s,"alt",n.content)}),z(t,o),$()}var Jc=G('<div class="markdown-node rounded-3xl"><div><label for="text"> </label></div></div> <!> <!> <!> <!> <!> <!> <!> <!>',1);function $c(t,e){J(e,!0);var n=Jc(),o=ne(n),r=Q(o),s=Q(r),i=Q(s,!0);q(s),q(r),q(o);var a=j(o,2);ge(a,{type:"target",get position(){return Y.Top},id:"top"});var f=j(a,2);ge(f,{type:"target",get position(){return Y.Left},id:"left"});var u=j(f,2);ge(u,{type:"target",get position(){return Y.Right},id:"right"});var c=j(u,2);ge(c,{type:"target",get position(){return Y.Bottom},id:"bottom"});var h=j(c,2);ge(h,{type:"source",get position(){return Y.Top},id:"top"});var d=j(h,2);ge(d,{type:"source",get position(){return Y.Left},id:"left"});var y=j(d,2);ge(y,{type:"source",get position(){return Y.Right},id:"right"});var v=j(y,2);ge(v,{type:"source",get position(){return Y.Bottom},id:"bottom"}),ie(()=>we(i,e.data.content)),z(t,n),$()}const ed={markdown:$c,image:Qc};function td(t){return t.map(e=>({id:e.id,source:e.fromNode,sourceHandle:e.fromSide,target:e.toNode,targetHandle:e.toSide}))}function nd(t){return t.map(e=>{const n=e.file===void 0?{type:"text",content:e.text}:{type:"file",content:e.file};return{id:e.id,width:e.width,height:e.height,position:{x:e.x,y:e.y},type:n.type==="file"?"markdown":"image",data:n}})}var od=G('<div class="canvas__ h-full w-full svelte-e4xfdd"><!></div>');function rd(t,e){J(e,!0);let n=ce(nd(e.data.nodes)),o=ce(td(e.data.edges));var r=od(),s=Q(r);Zc(s,{get nodeTypes(){return ed},fitView:!0,nodesConnectable:!1,nodesDraggable:!1,get nodes(){return l(n)},set nodes(i){A(n,i)},get edges(){return l(o)},set edges(i){A(o,i)},children:(i,a)=>{Uc(i,{})},$$slots:{default:!0}}),q(r),z(t,r),$()}var id=G('<article class="prose w-full max-w-full svelte-omnfyk"><!></article>');function sd(t,e){J(e,!0);var n=id(),o=Q(n);{var r=i=>{var a=de(),f=ne(a);ro(f,()=>e.post),z(i,a)},s=i=>{var a=de(),f=ne(a);ro(f,()=>e.post.content),z(i,a)};ue(o,i=>{typeof e.post=="string"?i(r):i(s,!1)})}q(n),z(t,n),$()}var ad=G("<!> <!>",1),ld=G("<!> <!>",1),cd=G('<a class="hover:text-accent cursor-pointer justify-start py-2 text-lg"> </a>'),dd=G('<div class="flex flex-col gap-2"><h1 class="font-title mb-6 text-4xl font-bold"> </h1> <!></div>'),ud=G("<!> <!>",1),fd=G("<!> <!> <!>",1),hd=G("<!> <!>",1),gd=G("<div>Unknown</div>"),md=G("<div><!> <!></div>");function Ed(t,e){J(e,!0);const n=m(()=>e.data.post),o=m(()=>e.data.previousPost?.slug),r=m(()=>e.data.nextPost?.slug),s=jr();var i=md(),a=Q(i);He(a,()=>fi,(h,d)=>{d(h,{class:"mb-6",children:(y,v)=>{var x=de(),_=ne(x);He(_,()=>xi,(P,N)=>{N(P,{children:(T,S)=>{var H=ld(),I=ne(H);tt(I,17,()=>l(n).incrementalSlugs.slice(0,l(n).incrementalSlugs.length-1),Gt,(M,V)=>{var X=ad(),E=ne(X);He(E,()=>so,(k,g)=>{g(k,{children:(w,b)=>{var C=de(),D=ne(C);{let O=m(()=>`/${l(V)}`);He(D,()=>vi,(R,B)=>{B(R,{get href(){return l(O)},children:(F,W)=>{$e();var Z=En();ie(re=>we(Z,re),[()=>gn(l(V))]),z(F,Z)},$$slots:{default:!0}})})}z(w,C)},$$slots:{default:!0}})});var p=j(E,2);He(p,()=>mi,(k,g)=>{g(k,{})}),z(M,X)});var K=j(I,2);He(K,()=>so,(M,V)=>{V(M,{children:(X,E)=>{var p=de(),k=ne(p);He(k,()=>bi,(g,w)=>{w(g,{children:(b,C)=>{$e();var D=En();ie(O=>we(D,O),[()=>Qr(gn(l(n).slug)??"")]),z(b,D)},$$slots:{default:!0}})}),z(X,p)},$$slots:{default:!0}})}),z(T,H)},$$slots:{default:!0}})}),z(y,x)},$$slots:{default:!0}})});var f=j(a,2);{var u=h=>{var d=dd(),y=Q(d),v=Q(y,!0);q(y);var x=j(y,2);tt(x,17,()=>l(n).data.posts,Gt,(_,P)=>{var N=cd(),T=Q(N,!0);q(N),ie(S=>{oe(N,"href",`/${l(P).slug}`),we(T,S)},[()=>l(P).slug.replace(`${l(n).slug}/`,"")]),z(_,N)}),q(d),ie(_=>we(v,_),[()=>gn(l(n).slug)]),z(h,d)},c=h=>{var d=de(),y=ne(d);{var v=_=>{var P=ud(),N=ne(P);Ni(N,{get slug(){return l(n).slug},get data(){return l(n).data.excalidrawJson}});var T=j(N,2);mn(T,{get previousPost(){return l(o)},get nextPost(){return l(r)}}),z(_,P)},x=_=>{var P=de(),N=ne(P);{var T=H=>{Di(H,{get data(){return l(n).data}})},S=H=>{var I=de(),K=ne(I);{var M=X=>{var E=fd(),p=ne(E);sd(p,{get post(){return l(n)}});var k=j(p,2);mn(k,{get previousPost(){return l(o)},get nextPost(){return l(r)}});var g=j(k,2);Jr(g,{storageKey:"tocOpen",side:"right",children:(w,b)=>{di(w,{get headings(){return l(n).data.headings}})},$$slots:{default:!0}}),z(X,E)},V=X=>{var E=de(),p=ne(E);{var k=w=>{var b=hd(),C=ne(b);rd(C,{get data(){return l(n).data}});var D=j(C,2);mn(D,{get previousPost(){return l(o)},get nextPost(){return l(r)}}),z(w,b)},g=w=>{var b=gd();z(w,b)};ue(p,w=>{l(n).data.kind==="canvas"?w(k):w(g,!1)},!0)}z(X,E)};ue(K,X=>{l(n).data.kind==="markdown"?X(M):X(V,!1)},!0)}z(H,I)};ue(N,H=>{l(n).data.kind==="base"?H(T):H(S,!1)},!0)}z(_,P)};ue(y,_=>{l(n).data.kind==="excalidraw"?_(v):_(x,!1)},!0)}z(h,d)};ue(f,h=>{l(n).data.kind==="folder"?h(u):h(c,!1)})}q(i),ie(h=>Ue(i,1,h),[()=>it(xt([s.current.isHeaderVisible?"py-20":"py-6","w-full max-w-200 px-4"]))]),z(t,i),$()}export{Tt as C,be as R,Ed as _,Et as a,Xn as d,$o as e,Sd as h,Ve as i,nr as n,Wi as r};
